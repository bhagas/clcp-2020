<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="shortcut icon" href="/images/template/Logo Kab Pekalongan.ico">
  <title>Sistem Informasi RTRW Kabupaten Pekalongan</title>

  <link href="/stylesheets/template/css/theme.css" rel="stylesheet">
  <link href="/stylesheets/template/css/style.css" rel="stylesheet">
  <link href="/stylesheets/template/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">



    <!-- Plugin This Page -->
    <link href="/resources-maps/stylesheets/leaflet-routing-machine.css" rel="stylesheet"/>
    <link href="/resources-maps/stylesheets/L.Control.Locate.min.css" rel="stylesheet"/>
    <link href="/resources-maps/stylesheets/leaflet-routing-machine.css" rel="stylesheet"/>
    <link href="/resources-maps/stylesheets/leaflet.extra-markers.css" rel="stylesheet"/>
    <link href="/resources-maps/stylesheets/leaflet.label.css" rel="stylesheet"/>
    <link href="/resources-maps/stylesheets/groupedlayercontrol.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/resources-maps/stylesheets/leaflet.draw.css" />
    <link href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" rel="stylesheet">
    <link href="/resources-maps/stylesheets/Control.FullScreen.css" rel="stylesheet"/>
    
    <script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
      <script src="https://unpkg.com/esri-leaflet@2.1.1/dist/esri-leaflet.js"
       integrity="sha512-ECQqaYZke9cSdqlFG08zSkudgrdF6I1d8ViSa7I3VIszJyVqw4ng1G8sehEXlumdMnFYfzY0tMgdQa4WCs9IUw=="
       crossorigin=""></script>
    <script src="/resources-maps/javascripts/leaflet-routing-machine.js"></script>
    <script src="/plugins/jquery/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="/resources-maps/javascripts/leaflet.label.js"></script>
    <script src="/resources-maps/panah-asmara.js"></script>
    <script src="https://maps.google.com/maps/api/js?v=3.2&key=AIzaSyBy8irzccEOp7ezf5nQ2UPaLGcte_AEsOQ"></script>
    <script src='https://unpkg.com/leaflet.gridlayer.googlemutant@latest/Leaflet.GoogleMutant.js'></script>
    <script src="/resources-maps/javascripts/L.Control.Locate.js" ></script>
    <script src="/resources-maps/javascripts/leaflet-routing-machine.js"></script>
    <script src="/resources-maps/javascripts/leaflet.extra-markers.js"></script>
    <script src="/resources-maps/javascripts/leaflet-image.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="/resources-maps/javascripts/Control.FullScreen.js"></script>
    <script src="/resources-maps/javascripts/groupedlayercontrol.js"></script>
    <script src="/resources-maps/javascripts/wicket.js"></script>
     <script src="/resources-maps/javascripts/wicket-leaflet.js"></script>
    <!-- drawing -->
    <script src="/resources-maps/draw/Leaflet.draw.js"></script>
    <script src="/resources-maps/draw/Leaflet.Draw.Event.js"></script>
    <script src="/resources-maps/draw/Toolbar.js"></script>
    <script src="/resources-maps/draw/Tooltip.js"></script>
    <script src="/resources-maps/draw/ext/GeometryUtil.js"></script>
    <script src="/resources-maps/draw/ext/LatLngUtil.js"></script>
    <script src="/resources-maps/draw/ext/LineUtil.Intersect.js"></script>
    <script src="/resources-maps/draw/ext/Polygon.Intersect.js"></script>
    <script src="/resources-maps/draw/ext/Polyline.Intersect.js"></script>
    <script src="/resources-maps/draw/ext/TouchEvents.js"></script>
    <script src="/resources-maps/draw/draw/DrawToolbar.js"></script>
    <script src="/resources-maps/draw/draw/handler/Draw.Feature.js"></script>
    <script src="/resources-maps/draw/draw/handler/Draw.SimpleShape.js"></script>
    <script src="/resources-maps/draw/draw/handler/Draw.Polyline.js"></script>
    <script src="/resources-maps/draw/draw/handler/Draw.Marker.js"></script>
    <script src="/resources-maps/draw/draw/handler/Draw.Polygon.js"></script>
    <script src="/resources-maps/draw/draw/handler/Draw.Rectangle.js"></script>
    <script src="/resources-maps/draw/edit/EditToolbar.js"></script>
    <script src="/resources-maps/draw/edit/handler/EditToolbar.Edit.js"></script>
    <script src="/resources-maps/draw/edit/handler/EditToolbar.Delete.js"></script>
    <script src="/resources-maps/draw/Control.Draw.js"></script>
    <script src="/resources-maps/draw/edit/handler/Edit.Poly.js"></script>
    <script src="/resources-maps/draw/edit/handler/Edit.SimpleShape.js"></script>
    <script src="/resources-maps/draw/edit/handler/Edit.Rectangle.js"></script>
    <script src="/resources-maps/draw/edit/handler/Edit.Marker.js"></script> 
    <script src="/resources-maps/main.js"></script> 
  
    <!-- End Plugins This Page -->
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <style type="text/css">
        /* Theme Builder */
.builder {
  -webkit-transition: -webkit-transform 600ms cubic-bezier(0.25, 0.1, 0.25, 1);
  background: #ffffff;
  border-left: 1px solid rgba(224, 226, 234, 0.53);
  bottom: 0;
  box-shadow: 0 0 9px rgba(155, 155, 155, 0.55);
  position: fixed;
  right: -240px;
  top: 0;
  transition: transform 600ms cubic-bezier(0.25, 0.1, 0.25, 1);
  width: 240px;
  z-index: 1000;
}
.builder .inner .builder-container {
  padding: 20px;
}
.builder h4 {
  font-family: 'Lato', 'Open Sans';
  font-size: 14px;
  font-weight: 900;
  margin-bottom: 10px;
  margin-top: 10px;
  padding-top: 10px;
  text-transform: uppercase;
}
.builder a {
  color: #A1A1A1;
  display: block;
  position: relative;
  width: 100%;
}
.builder a:hover {
  color: #818181;
  text-decoration: none !important;
}
.builder a:active {
  color: #818181;
  text-decoration: none !important;
}
.builder a:focus {
  color: #818181;
  text-decoration: none !important;
}
.builder a.active {
  color: #2E2E2E;
}
.builder .layout-option {
  margin-bottom: 20px;
}
.builder .switch {
  margin-top: -4px;
}
.builder .theme-selector.active:before {
  right: 10px;
  top: 54px;
}
.builder .builder-close {
  padding: 7px;
  position: absolute;
  right: 36px;
  top: 20px;
  width: auto;
  z-index: 10;
}
.builder .builder-toggle {
  cursor: pointer;
  font-size: 16px;
  height: 50px;
  left: -48px;
  line-height: 50px;
  padding-top: 2px;
  position: absolute;
  text-align: center;
  top: 23%;
  width: 54px;
  z-index: 1010;
}
.builder .builder-toggle i {
  padding-right: 5px;
}
.builder:before {
  background-color: #ffffff;
  border-bottom-left-radius: 4px;
  border-left: 1px solid rgba(224, 226, 234, 0.53);
  border-top-left-radius: 4px;
  box-shadow: -3px 2px 2px rgba(189, 189, 189, 0.28);
  content: '';
  height: 50px;
  left: -47px;
  position: absolute;
  top: 23%;
  width: 48px;
}
.builder .color-options p {
  margin-bottom: 0;
}
.builder .theme-color {
  cursor: pointer;
  display: inline-block;
  height: 22px;
  margin-right: 3px;
  position: relative;
  width: 22px;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
}
.builder .theme-color.bg-clean {
  border: 2px solid #E4E4E4;
}
.builder .bg-color {
  border: 2px solid #E4E4E4;
}
.builder .theme-color.active:after {
  color: #ffffff;
  content: "\e125";
  display: inline-block;
  font-family: "line-icons" !important;
  font-size: 11px;
  left: 5px;
  position: absolute;
  text-align: center;
  top: 5px;
}
.builder .bg-color.active:after {
  color: #464646;
  content: "\e125";
  display: inline-block;
  font-family: "line-icons" !important;
  font-size: 11px;
  left: 3px;
  position: absolute;
  text-align: center;
  top: 3px;
}
.builder .background-primary {
  background-color: #319DB5 !important;
  color: #ffffff !important;
}
.builder .theme {
  border: 1px solid #ededed;
  cursor: pointer;
  margin-bottom: 20px;
  overflow: hidden;
  position: relative;
}
.builder .theme div {
  display: inline-block;
  float: left;
  height: 40px;
  width: 50%;
}
.builder .theme div:nth-child(1) {
  width: 30%;
}
.builder .theme div:nth-child(3) {
  width: 30%;
}
.builder .theme div:nth-child(2) {
  width: 70%;
}
.builder .theme div:nth-child(4) {
  width: 70%;
}
.builder .theme div.header {
  height: 10px;
}
.builder .theme.active:before {
  background: rgba(0, 0, 0, 0.2);
  bottom: 0;
  content: "";
  height: 50px;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
  width: 93px;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
}
.builder .theme.active:after {
  color: #ffffff;
  content: "\e125";
  display: inline-block;
  font-family: "line-icons" !important;
  font-size: 11px;
  left: 9px;
  position: absolute;
  right: auto;
  text-align: center;
  top: 32px;
  z-index: 100000;
}
.builder #reset-style {
  margin: 0;
  width: auto;
}
.builder.open {
  -ms-transform: translate(-100%, 0);
  -webkit-transform: translate3d(-100%, 0, 0);
  transform: translate3d(-100%, 0, 0);
}
          body{
            font-family: 'Poppins', sans-serif;
            background-image: url('/images/template/pattern.png');
            background-repeat: repeat;
            }

            .section-one ul.list-unstyled li{
                margin-top: 10px;
                margin-bottom: 10px;
            }


            .section-one ul.list-unstyled li a{
                text-decoration: none;
                color: black;
                font-weight: 700;
            }

            .detailnya{
              display: none;
            }

            @media (max-width: 768px) { 
              .content { 
                padding-left: 15px; 
                padding-right: 15px;
                padding-top: 15px; 
                padding-bottom: 15px; 
              } 
            }

            .box-khl, .box-sempadan, .box-ekosistem, .box-hortikultura,
            .box-jalan, .box-hptetap, .box-hpterbatas, .box-tanaman, .box-perikanan, .box-industri, 
            .box-permukiman, .box-perdesaan, .box-pertanahan, .box-hortikultura2,
            .box-lppb,
            .box-jalur, .box-bencana, .box-evakuasi
            {
              display: none;
            }
            
            td{
              padding-top: 5px !important;
              padding-bottom: 5px !important;
              padding-left: 0 !important;
              padding-right: 0 !important;
            }

            ::-webkit-scrollbar {
    width: 12px;
}
 
::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 0;
}
 
::-webkit-scrollbar-thumb {
    border-radius: 0;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
}
        </style>
</head>

<body>
    

    <section class="section-one">
      <header style="background-color: rgba(255,255,255,0.6);">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-3 p-r-0">
              <div style="width: 100%;display: flex;justify-content: flex-start;align-items: center;height: 10vh;background-color: ;">
                <img src="/images/template/Logo Kab Pekalongan.png" alt="" style="height: 8vh;">
                <h4 class="m-t-0 m-b-0 m-l-10"><strong><span style="letter-spacing: 12.5px;">PEMERINTAH</span><br/>KABUPATEN PEKALONGAN</strong></h4>
              </div>
            </div>
            <div class="col-lg-7">
              <div style="width: 100%;display: flex;justify-content: space-evenly;align-items: center;height: 10vh;background-color: ;">
                <a href="/" style="color:#333;text-decoration:none">BERANDA</a>
                <a href="/kawasan_strategis" style="color:#333;text-decoration:none">KAWASAN STRATEGIS</a>
                <a href="/struktur_ruang" style="color:#333;text-decoration:none">STRUKTUR RUANG</a>
                <a href="/pola_ruang" style="color:#333;text-decoration:none">POLA RUANG</a>
                <a href="/indikasi_program" style="color:#333;text-decoration:none">INDIKASI PROGRAM</a>
                <!-- <ul class="list-inline m-b-0">
                  <li style="margin-left:10px;margin-right:10px;"></li>
                  <li style="margin-left:10px;margin-right:10px;"></li>
                  <li style="margin-left:10px;margin-right:10px;"></li>
                  <li style="margin-left:10px;margin-right:10px;"></li>
                  <li style="margin-left:10px;margin-right:10px;"></li>
                </ul> -->
              </div>
            </div>
            <div class="col-lg-2 p-l-0">
              <div style="display: flex;height: 10vh;justify-content: flex-end;align-items: center;">
                <a href="/alur_informasi_tata_ruang" style="text-decoration:none">
                <div style="background-color: #00be80;padding:10px 10px;border-radius: 6px;" class="animated tada infinite">
                  <h4 style="font-size: 14px;margin-top: 0;margin-bottom: 0;text-align: center;"><strong>INFORMASI <span style="color: #fff;">TATA RUANG</span></strong></h4>
                </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </header>
      
      <div class="container-fluid">
        
        <div class="row">
          <div class="col-lg-3" style="padding-left: 0;padding-right: 0;">
            <div style="height: 90vh;padding-top: 2.5vh;padding-bottom: 2.5vh;background-color: ;overflow-y: auto;padding-left: 15px;padding-right: 15px;background-color: rgba(255,255,255,0.6);">
              <div class="row">
                <div class="col-lg-12">
                  <h3 class="text-center" style="margin-top:0;margin-bottom: 0;"><strong>SISTEM INFORMASI RTRW</strong></h3>
                  <h4 class="text-center" style="margin-top:0;color:#2ecc71">KABUPATEN PEKALONGAN</h4>
                </div>
              </div>

              <div class="row">
                <div class="col-lg-12 table-no-border">
                  <table class="table table-bordered" style="margin-bottom: 0;">
                    <tbody>
                      <!-- <tr>
                        <td colspan="4"><h5 style="margin-top: 0;margin-bottom: 0;"><strong>Pencarian :</strong></h5></td>
                      </tr> -->
                      <tr>
                        <td style="vertical-align: middle;width: 100px;">Kecamatan</td>
                        <td style="vertical-align: middle;width: 10px;">:</td>
                        <td>
                          <select class="form-control" name="" id="kec">
                            <option value="">-- Pilih --</option>
                            <%for(let i =0; i < kec.length; i++){%>
                              <option value="<%=kec[i].kecamatan%>" xe="<%=kec[i].xe%>" ye="<%=kec[i].ye%>"><%=kec[i].kecamatan%></option>
                              <%}%>
                          </select>
                        </td>
                      </tr>

                      <tr>
                        <td style="vertical-align: middle;">Kelurahan</td>
                        <td style="vertical-align: middle;">:</td>
                        <td>
                          <select class="form-control" name="" id="desa">
                            <option value="">-- Pilih --</option>
                          </select>
                        </td>
                      </tr>

                      <tr>
                        <td colspan="4" class="ui-widget">
                          <!-- <input  class="form-control" name="" id="" placeholder="Tuliskan pola ruang yang anda cari"> -->
                          <input id="pemilik" class="form-control" type="text" placeholder="Tuliskan pola ruang yang anda cari">
                        </td>
                      </tr>

                      <tr>
                        <td colspan="4"><button class="btn btn-success btn-sm" id="pencarian">Cari</button></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="row" style="margin-top: 30px;">
                <div class="col-lg-12">
                  <h5 style="margin-top: 0;margin-bottom: 0;"><strong>Layer Peta :</strong></h5>
                </div>
                <div class="col-lg-12" style="margin-top:15px">
                  <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    <div class="panel panel-default" >
                      <div class="panel-heading" role="tab" id="headingOne" style="background-color: #2ecc71;">
                        <h4 class="panel-title" style="color: #fff;font-weight: bold;">
                          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            KAWASAN LINDUNG
                          </a>
                        </h4>
                      </div>
                      <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                        <div class="panel-body table-no-border">
                         <table class="table table-bordered" style="margin-bottom: 0;">
                           <tbody>
                              <tr>
                                <td style="vertical-align: middle;width: 25px;"><input type="checkbox" id="lindung" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Kawasan Hutan Lindung</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Kawasan Hutan Lindung', '2', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-khl">Legenda</span> </h6>
                                </td>
                              </tr>
  
                              <tr>
                                <td colspan="2">
                                  <div class="box-khl">
                                    <img src="/images/template/legenda/htl.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="sempadan" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Sempadan</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;"  onclick="pupz('Sempadan', '6', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-sempadan">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-sempadan">
                                    <img src="/images/template/legenda/sempadan.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>

                              
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="mangrove" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Ekosistem Mangrove</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;"  onclick="pupz('Ekosistem Mangrove', '21', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-ekosistem">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-ekosistem">
                                    <img src="/images/template/legenda/mangrove.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="hortikultura" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Hortikultura</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;"  onclick="pupz('Kawasan Hortikultura', '29', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-hortikultura">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-hortikultura">
                                    <img src="https://via.placeholder.com/300?text=hortikultura" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
                           </tbody>
                         </table>
                        </div>
                      </div>
                    </div>
                    <div class="panel panel-success">
                      <div class="panel-heading" role="tab" id="headingTwo" style="background-color: #2ecc71;">
                        <h4 class="panel-title" style="color: #fff;font-weight: bold;">
                          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            KAWASAN BUDIDAYA
                          </a>
                        </h4>
                      </div>
                      <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                        <div class="panel-body table-no-border">
                          <table class="table table-bordered" style="margin-bottom: 0;">
                            <tbody>
                              <tr>
                                 <td style="vertical-align: middle;width: 25px;"><input type="checkbox" id="jalan" name="" value=""></td>
                                 <td style="vertical-align: middle;">
                                   <h5 style="margin-top: 0;margin-bottom: 0;">Jalan</h5>
                                   <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;"  onclick="pupz('Jalan', '2110', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-jalan">Legenda</span> </h6>
                                 </td>
                              </tr>
     
                              <tr>
                                 <td colspan="2">
                                   <div class="box-jalan">
                                     <img src="https://via.placeholder.com/300?text=Jalan" alt="" style="width: 100%;">
                                   </div>
                                 </td>
                              </tr>

                              <tr>
                                <td style="vertical-align: middle;width: 25px;"><input type="checkbox" id="sungai" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Sungai</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;"  onclick="pupz('Sungai', '4470', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-jalan">Legenda</span> </h6>
                                </td>
                             </tr>
    
                             <tr>
                                <td colspan="2">
                                  <div class="box-jalan">
                                    <img src="https://via.placeholder.com/300?text=Jalan" alt="" style="width: 100%;">
                                  </div>
                                </td>
                             </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="produksi_tetap" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Hutan Produksi Tetap</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Hutan Produksi Tetap', '24', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-hptetap">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-hptetap">
                                    <img src="/images/template/legenda/hptetap.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="produksi_terbatas" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Hutan Produksi Terbatas</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Hutan Produksi Terbatas', '23', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-hpterbatas">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-hpterbatas">
                                    <img src="/images/template/legenda/hpterbatas.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="tanaman" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Kawasan Tanaman</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Kawasan Tanaman Pangan', '28', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-tanaman">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-tanaman">
                                    <img src="/images/template/legenda/tanaman.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="perikanan" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Perikanan Budidaya</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Perikanan Budidaya', '34', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-perikanan">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-perikanan">
                                    <img src="/images/template/legenda/perikanan.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
                              
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="industri" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Industri</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Industri', '42', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-industri">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-industri">
                                    <img src="/images/template/legenda/industri.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="permukiman_perkotaan" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Permukiman Perkotaan</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Permukiman Perkotaan', '47', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-permukiman">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-permukiman">
                                    <img src="/images/template/legenda/perkotaan.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>

                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="permukiman_perdesaan" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Permukiman Perdesaan</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Hutan Produksi Terbatas', '48', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-perdesaan">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-perdesaan">
                                    <img src="/images/template/legenda/perdesaan.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="pertanahan" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Pertanahan & Keamanan</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Hutan Produksi Terbatas', '49', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-pertanahan">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-pertanahan">
                                    <img src="https://via.placeholder.com/300?text=Pertanahan" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="hortikultura2" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Kawasan Hortikultura</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" onclick="pupz('Hutan Produksi Terbatas', '29', '')">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-hortikultura2">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-hortikultura2">
                                    <img src="/images/template/legenda/hortikultura.png" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                    <div class="panel panel-success">
                      <div class="panel-heading" role="tab" id="headingThree" style="background-color: #2ecc71;">
                        <h4 class="panel-title" style="color: #fff;font-weight: bold;">
                          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            LPPB
                          </a>
                        </h4>
                      </div>
                      <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
                        <div class="panel-body table-no-border">
                          <table class="table table-bordered" style="margin-bottom: 0;">
                            <tbody>
                              <tr>
                                 <td style="vertical-align: middle;width: 25px;"><input type="checkbox" id="lppb" name="" value=""></td>
                                 <td style="vertical-align: middle;">
                                   <h5 style="margin-top: 0;margin-bottom: 0;">LPPB</h5>
                                   <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" data-toggle="modal" data-target=".modal-ketentuan">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-lppb">Legenda</span> </h6>
                                 </td>
                              </tr>
     
                              <tr>
                                 <td colspan="2">
                                   <div class="box-lppb">
                                     <img src="/images/template/legenda/lppb.png" alt="" style="width: 100%;">
                                   </div>
                                 </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>

                    <!-- <div class="panel panel-success">
                      <div class="panel-heading" role="tab" id="headingFour" style="background-color: #2ecc71;">
                        <h4 class="panel-title" style="color: #fff;font-weight: bold;">
                          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                            KEBENCANAAN
                          </a>
                        </h4>
                      </div>
                      <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
                        <div class="panel-body table-no-border">
                          <table class="table table-bordered" style="margin-bottom: 0;">
                            <tbody>
                              <tr>
                                 <td style="vertical-align: middle;width: 25px;"><input type="checkbox" id="" name="" value=""></td>
                                 <td style="vertical-align: middle;">
                                   <h5 style="margin-top: 0;margin-bottom: 0;">Jalur Evakuasi</h5>
                                   <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" data-toggle="modal" data-target=".modal-ketentuan">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-jalur">Legenda</span> </h6>
                                 </td>
                              </tr>
     
                              <tr>
                                 <td colspan="2">
                                   <div class="box-jalur">
                                     <img src="https://via.placeholder.com/300" alt="" style="width: 100%;">
                                   </div>
                                 </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Kawasan Rawan Bencana</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" data-toggle="modal" data-target=".modal-ketentuan">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-bencana">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-bencana">
                                    <img src="https://via.placeholder.com/300" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
    
                              <tr>
                                <td style="vertical-align: middle;"><input type="checkbox" id="" name="" value=""></td>
                                <td style="vertical-align: middle;">
                                  <h5 style="margin-top: 0;margin-bottom: 0;">Tempat Evakuasi</h5>
                                  <h6 style="margin-top: 5px;margin-bottom: 0;color:#2ecc71"><span style="cursor: pointer;" data-toggle="modal" data-target=".modal-ketentuan">Ketentuan</span> - <span style="cursor: pointer;" class="legenda-evakuasi">Legenda</span> </h6>
                                </td>
                              </tr>
    
                              <tr>
                                <td colspan="2">
                                  <div class="box-evakuasi">
                                    <img src="https://via.placeholder.com/300" alt="" style="width: 100%;">
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-9" style="padding-left: 0;padding-right: 0;">
            <div style="width: 100%;height: 90vh; ;" id="map"></div>
          </div>
        </div>
      </div>
    </section>
      
    <section style="position: absolute;right: 0px;top: 0;bottom: 0;z-index: 1000" class="table-no-border">
        <div id="konten-detail" style="width: 315px;height: 100vh;background-color: #E0E0E0;display: none;">
            <div style="width: 100%;padding: 15px;">
               
            </div>
        </div>
    </section>

    <div class="modal fade modal-ketentuan" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">KETENTUAN POLA RUANG </h4>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-lg-12">
                <table class="table table-bordered">
                  <thead style="background-color: #00be80">
                    <tr> 
                      <th>No.</th>
                      <th>Kawasan</th>
                     
                    </tr>
                  </thead>
  
                  <tbody id="tabel_polaruang">
                    <tr>
                      <td colspan="8">Tidak ada data</td>
                       <!-- <td>perwujudannya</td>
                        <td>perwujudannya</td> -->
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
          </div>
        </div>
      </div>
    </div>

    <!-- modal -->
    <!-- <div class="modal fade modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="gridSystemModalLabel">Detail Pola Ruang</h4>
          </div>
           <table class="table table-bordered" id="konten_polaruang">
                 


                 
                </table>
          <div class="modal-body">
            <div class="row">
              <div class="col-lg-12">
                <table class="table table-bordered">
                  <thead style="background-color: #00be80">
                    <tr> 
                      <th>No.</th>
                      <th>Kawasan</th>
              
                    </tr>
                  </thead>
  
                  <tbody id="tabel_polaruang">
                    <tr>
                      <td colspan="8">Ulangi kembali digitasi</td>
                       <!-- <td>perwujudannya</td>
                        <td>perwujudannya</td> -->
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="modal-footer" id="link_print">
          
          </div>
        </div>
      </div>
    </div> -->

    <!-- <div class="builder" id="builder">
      <a class="builder-toggle"><img src="/images/template/layers.png" alt="" style="width: 30px;"></a>
      <div class="inner mCustomScrollbar _mCS_1 mCS-autoHide" style="height: 100%;"><div id="mCSB_1" class="mCustomScrollBox mCS-light mCSB_vertical mCSB_inside" style="max-height: none;" tabindex="0"><div id="mCSB_1_container" class="mCSB_container" style="position:relative; top:0; left:0;" dir="ltr">
        <div class="builder-container">
          <h3 style="margin-top: 0;margin-bottom: 30px;font-family: Source Sans Pro;text-align: center;font-size: 18px;"><strong>LAYER POLA RUANG</strong></h3>
          <h4 style="margin-top: 0;margin-bottom: 0;font-family: Source Sans Pro"><strong>Kawasan Lindung</strong></h4>
          

          <h4 style="margin-top: 0;margin-bottom: 0;font-family: Source Sans Pro"><strong>Kawasan Budidaya</strong></h4>
          
        </div>
      </div><div id="mCSB_1_scrollbar_vertical" class="mCSB_scrollTools mCSB_1_scrollbar mCS-light mCSB_scrollTools_vertical" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_1_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 30px; display: block; height: 121px; max-height: 267.333px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 30px;"></div></div><div class="mCSB_draggerRail"></div></div></div></div></div>
    </div> -->
   
    <script src="/javascripts/template/bootstrap.min.js"></script>
    <!-- Plugins This Page -->
    <!-- End Plugins This Page -->
    <script type="text/javascript">
    $(document).ready(function(){
      $(".legenda-khl").click(function(){
        $(".box-khl").toggle();
        $(".box-sempadan").hide();
        $(".box-ekosistem").hide();
        $(".box-hortikultura").hide();
      });

      $(".legenda-sempadan").click(function(){
        $(".box-khl").hide();
        $(".box-sempadan").toggle();
        $(".box-ekosistem").hide();
        $(".box-hortikultura").hide();
      });

      $(".legenda-ekosistem").click(function(){
        $(".box-khl").hide();
        $(".box-sempadan").hide();
        $(".box-ekosistem").toggle();
        $(".box-hortikultura").hide();
      });

      $(".legenda-hortikultura").click(function(){
        $(".box-khl").hide();
        $(".box-sempadan").hide();
        $(".box-ekosistem").hide();
        $(".box-hortikultura").toggle();
      });

      // 

      $(".legenda-jalan").click(function(){
        $(".box-jalan").toggle();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").hide();
        $(".box-perikanan").hide();
        $(".box-industri").hide();
        $(".box-permukiman").hide();
        $(".box-perdesaan").hide();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-hptetap").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").toggle();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").hide();
        $(".box-perikanan").hide();
        $(".box-industri").hide();
        $(".box-perdesaan").hide();
        $(".box-permukiman").hide();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-hpterbatas").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").toggle();
        $(".box-tanaman").hide();
        $(".box-perikanan").hide();
        $(".box-industri").hide();
        $(".box-perdesaan").hide();
        $(".box-permukiman").hide();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-tanaman").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").toggle();
        $(".box-perikanan").hide();
        $(".box-industri").hide();
        $(".box-perdesaan").hide();
        $(".box-permukiman").hide();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-perikanan").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").hide();
        $(".box-perikanan").toggle();
        $(".box-industri").hide();
        $(".box-perdesaan").hide();
        $(".box-permukiman").hide();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-industri").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").hide();
        $(".box-perikanan").hide();
        $(".box-industri").toggle();
        $(".box-perdesaan").hide();
        $(".box-permukiman").hide();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-permukiman").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").hide();
        $(".box-perikanan").hide();
        $(".box-industri").hide();
        $(".box-perdesaan").hide();
        $(".box-permukiman").toggle();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-perdesaan").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").hide();
        $(".box-perikanan").hide();
        $(".box-industri").hide();
        $(".box-perdesaan").toggle();
        $(".box-permukiman").hide();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-pertanahan").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").hide();
        $(".box-perikanan").hide();
        $(".box-industri").hide();
        $(".box-perdesaan").hide();
        $(".box-permukiman").hide();
        $(".box-pertanahan").toggle();
        $(".box-hortikultura2").hide();
      });

      $(".legenda-hortikultura2").click(function(){
        $(".box-jalan").hide();
        $(".box-hptetap").hide();
        $(".box-hpterbatas").hide();
        $(".box-tanaman").hide();
        $(".box-perikanan").hide();
        $(".box-industri").hide();
        $(".box-perdesaan").hide();
        $(".box-permukiman").hide();
        $(".box-pertanahan").hide();
        $(".box-hortikultura2").toggle();
      });

      $(".legenda-lppb").click(function(){
        $(".box-lppb").toggle();
      });

      $(".legenda-jalur").click(function(){
        $(".box-jalur").toggle();
        $(".box-bencana").hide();
        $(".box-evakuasi").hide();
      });

      $(".legenda-bencana").click(function(){
        $(".box-jalur").hide();
        $(".box-bencana").toggle();
        $(".box-evakuasi").hide();
      });

      $(".legenda-evakuasi").click(function(){
        $(".box-jalur").hide();
        $(".box-bencana").hide();
        $(".box-evakuasi").toggle();
      });
    });
    // /**** BUILDER FUNCTIONS ****/
    // function toggleBuilder(){
    //         $('.builder-toggle').on('click', function(){
    //             if($('#builder').hasClass('open')) $('#builder').removeClass('open');
    //             else $('#builder').addClass('open');
    //         });
    //     }

    //     /* Active Custom Scroll for Builder Sidebar */
    //     function builderScroll() {
    //         $('.builder .inner').mCustomScrollbar("destroy");
    //         scroll_height = "100%";
    //         $('.builder .inner').mCustomScrollbar({
    //             scrollButtons: {
    //                 enable: false
    //             },
    //             autoHideScrollbar: true,
    //             scrollInertia: 150,
    //             theme: "light",
    //             set_height: scroll_height,
    //             advanced: {
    //                 updateOnContentResize: true
    //             }
    //         });
    //     }

    //     toggleBuilder();
    //     builderScroll();


    $("#btn-detail").click(function(){
        $("#konten-detail").toggle("slide", {direction:"right"}, 500);
    });

    $('.modal').on('show.bs.modal', function (e) {
      $(".detailnya").show();
    })

    function pupz(nama,idtipe,sudut_kepe){
        $('#tabel_polaruang').empty()
        $.ajax({
                                 type : "GET",
                                 async : false,
                                 global : false,
                                 url : root + `peta/json_pupz?kode=${idtipe}${sudut_kepe}`,
                                 dataType : 'json',
                                 success: function (data) {
                                // console.log(data)
                                let terbatas = "<ol>";
                                                      let bersyarat = "<ol>";
                                                        let diizinkan = "<ol>";
                                                          let dilarang = "<ol>";
                                                            let ketentuan = "<ol>";
                                                              let keterangan = "<ol>";
                                                                $.each(data, function(i, itm){
                                                                  // console.log(itm)
                                                                  if(itm.terbatas !=""){
                                                                    terbatas+=`<li>${itm.terbatas}</li>`
                                                                  }
                                                                  if(itm.bersyarat !=""){
                                                                    bersyarat+=`<li>${itm.bersyarat}</li>`
                                                                  }
                                                                  if(itm.diizinkan !=""){
                                                                    diizinkan+=`<li>${itm.diizinkan}</li>`
                                                                  }
                                                                  if(itm.dilarang !=""){
                                                                    dilarang+=`<li>${itm.dilarang}</li>`
                                                                  }
                                                                  if(itm.ketentuan !=""){
                                                                    ketentuan+=`<li>${itm.ketentuan}</li>`
                                                                  }
                                                                  if(itm.keterangan !=""){
                                                                    keterangan+=`<li>${itm.keterangan}</li>`
                                                                  }
                                                                })
                                                                 terbatas += "</ol>";
                                                       bersyarat += "</ol>";
                                                         diizinkan += "</ol>";
                                                           dilarang += "</ol>";
                                                             ketentuan += "</ol>";
                                                               keterangan += "</ol>";
                                                       $('#tabel_polaruang').append("<tr><td>1</td><td>"+nama+"  </td><td>"+diizinkan+"</td><td>"+terbatas+"</td><td>"+bersyarat+"</td><td>"+dilarang+"</td><td>"+ketentuan+"</td><td>"+keterangan+"</td></tr>")

                                                       $('.modal-ketentuan').modal('show');
                                 }
                               });
       }
   </script>

    <script type="text/javascript">
             function toWKT (layer) {
                 var lng, lat, coords = [];
                if (layer instanceof L.Polygon || layer instanceof L.Polyline) {
                  var latlngs = layer.getLatLngs();
                for (var i = 0; i < latlngs.length; i++) {
                    var latlngs1 = latlngs[i];
                    if (latlngs1.length){
                    for (var j = 0; j < latlngs1.length; j++) {
                      coords.push(latlngs1[j].lng + " " + latlngs1[j].lat);
                      if (j === 0) {
                        lng = latlngs1[j].lng;
                        lat = latlngs1[j].lat;
                      }
                    }}
                    else
                    {
                      coords.push(latlngs[i].lng + " " + latlngs[i].lat);
                      if (i === 0) {
                        lng = latlngs[i].lng;
                        lat = latlngs[i].lat;
                      }}
                };
                  if (layer instanceof L.Polygon) {
                    return "POLYGON((" + coords.join(",") + "," + lng + " " + lat + "))";
                  } else if (layer instanceof L.Polyline) {
                    return "LINESTRING(" + coords.join(",") + ")";
                  }
                } else if (layer instanceof L.Marker) {
                  return "POINT(" + layer.getLatLng().lng + " " + layer.getLatLng().lat + ")";
                }
              };
           
        

            var warna_total = ['#ffffff','#ffffff'];
                 var labels = ['Sumber Peta :','RTRW Tahun 2011-2031'];
                  var wkt = new Wkt.Wkt();
             function onLocationFound(e) {
                 var radius = e.accuracy / 2;
                 
                 if(center == 0 ){
                   map.setView(e.latlng, 13);
                   center++;
                 }
                //   var koordinat = {latlng:{lat: ye, lng: xe}};
                
                   
                //console.log(koordinat)
                 clickHandler(e)
                 // iht_layer.eachLayer(function (layer) {
                 //   layer_lat_long = layer.getLatLng();
                 //   layer_lat = layer.getLatLng().lat;
                 //   layer_lng = layer.getLatLng().lng;

                 //   // jarak ke point saat ini dalam meter
                 //   var posisi_kita_lat = e.latlng.lat;
                 //   var posisi_kita_lng = e.latlng.lng;

                 //   jarak = layer_lat_long.distanceTo(e.latlng);

                 //   var popupContent = getPopup( layer, posisi_kita_lat, posisi_kita_lng, layer_lat, layer_lng );
                 //   layer.bindPopup(popupContent, popupOptions);
                 //   if(jarak > 30000){
                 //      // layer.setOpacity(0);
                 //      // layer.unbindPopup();
                 //   }
                 // });
               }

               function ke_lokasi(x_awal, y_awal, x_akhir, y_akhir){
                 map.closePopup();
                 console.log(x_awal+ ' , ' +y_awal+ ' ; ' +x_akhir + ' , ' + y_akhir)

                 if(navigasi!=null){
                   navigasi.spliceWaypoints(navigasi.getWaypoints().length - 1, 1, L.latLng(x_akhir, y_akhir));   
                 }
                 else{
                   navigasi =  L.Routing.control({
                     // waypointIcon :
                     // waypoints : [L.latLng(x_awal, y_awal), L.latLng(x_akhir, y_akhir)]
                     plan: L.Routing.plan([
                         L.latLng(x_awal, y_awal),
                         L.latLng(x_akhir, y_akhir)
                     ], 
                     {
                       createMarker: function(i, wp) {
                         return L.marker(wp.latLng, {
                           draggable: false,
                           icon: routeIcon
                         });
                       }
                       // geocoder: L.Control.Geocoder.nominatim(),
                       // routeWhileDragging: true
                     })
                   });
                   navigasi.addTo(map);
                   console.log(navigasi.getPlan());
                   $('.leaflet-routing-container').append('<a href="#" id="tutup_navigasi" onclick="tutup_navigasi()">BATAL</a>');
                 }
               }
               
               function tutup_navigasi() {
                 if(navigasi!=null){
                   navigasi.spliceWaypoints(0, 2);
                   $('.leaflet-routing-container').hide();
                   navigasi = null;
                 }
               }

               function tambah_titik(x, y, id_jalan){

                 map.panTo(new L.LatLng(x, y));
                 map.setZoom(16);

                 jalan_layer.eachLayer(function (layer) {
                   if ( layer.feature.properties.id_jalan == id_jalan ) {
                     console.log(layer.feature.properties)
                     layer.openPopup();
                   };
                 });
               }

               $('#cari').click(function(){
                 var xe =  $('#xe').val();
                 var ye = $('#ye').val();
                   map.panTo(new L.LatLng(ye, xe));
                 map.setZoom(16);
                 var koordinat = {latlng:{lat: ye, lng: xe}};
                
                   
                //console.log(koordinat)
                 clickHandler(koordinat)
               })


               /**
                * 
                *  Variables Initialization
                * 
                */
               var kabupaten_layer;
               var iht_layer = null;
               var source = null;
               var marker;
               var lingkaran;
               var center = 0;
               var navigasi=null;
               var kabupaten_layer;
               var marker_search='';

               /**
                * 
                *  Layer Styling
                * 
                */
               var sembunyi = {
                 color : "transparent",
                 weight : 1,
                 opacity : 0,
                 fillOpacity : 0
               };
               
                var style_kabupaten = {
                     color : "yellow", 
                     weight : 3, 
                     opacity : 1, 
                     fillOpacity  : 0,
                     dashArray : 3
                   };
                var style_gambar = {
                     color : "blue", 
                     weight : 2, 
                     opacity : 1, 
                     fillOpacity  : 0
                     
                   };
                    var style_desa = {
                     color : "white", 
                     weight : 1, 
                     opacity : 1, 
                     fillOpacity  : 0,
                     dashArray : 3
                   };
                var style_polaruang = {
                 color : "cyan", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.3,
                 dashArray : 3
               };
                var style_perikanan = {
                 color : "#C1EFFD", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };
                var style_hutan_lindung = {
                 color : "#DFFFEA", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };
                var style_pertahanan = {
                 color : "#F224C6", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };
                var style_hutan_produksi_terbatas = {
                 color : "#B2E8E8", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               var style_hutan_produksi_tetap = {
                 color : "#99F2CD", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               

               var style_kawasan_industri = {
                 color : "#E4E8B3", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               var style_permukiman = {
                 color : "#FCDB2B", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               var style_pertanian_lahan_basah = {
                 color : "#CBFFB5", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               var style_pertanian_lahan_kering = {
                 color : "#95FEBD", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               var style_rth = {
                 color : "#97FEC0", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               var style_sempadan_pantai = {
                 color : "#CCFFCC", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               var style_sempadan_sungai = {
                 color : "#C1FFCD", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0.7,
                 dashArray : 3
               };

               var style_kawasan_tanaman_pangan = {
                 color : "#98f442", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  :0.7,
                 dashArray : 3
               };

               var style_lppb = {
                 color : "#2ECC71", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  :0.7,
                 dashArray : 3
               };

             

               var style_kabupaten_gelap = {
                 color : "#000", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0,
                 dashArray : 3
               };
               
               var popupOptions = {
                 maxWidth : '450',
                 minWidth : '250',
                 className : 'custom',
                 closeOnClick : true
               };

               /**
                * 
                *  Map initialization
                * 
               . The Longitude of Kota Pati is 
                */
               var southWest = L.latLng(-8.629903118263488, 108.0780029296875),
                 northEast = L.latLng(-6.124169589851178, 112.52746582031249),
                 bounds = L.latLngBounds(southWest, northEast);
               var map = L.map('map', {
                   center: [ -7.004990, 109.614342],
                   // maxBounds: bounds,
                   zoom: 11.3,
                   minZoom:2,
                   maxZoom:19,
                   fullscreenControl: true,
                   fullscreenControlOptions: {
                     position: 'topleft'
                   }
               });


               //ngilangi garis putih
       



                 function clickHandler(e) {
                
      //  var clickBounds = L.latLngBounds(e.latlng, e.latlng);

      //  var intersectingFeatures = [];
      //    for (var l in map._layers) {
      //    var overlay = map._layers[l];
      //    if (overlay._layers) {
      //      for (var f in overlay._layers) {
      //        var feature = overlay._layers[f];
      //        var bounds;
      //        if (feature.getBounds) bounds = feature.getBounds();
      //        else if (feature._latlng) {
      //          bounds = L.latLngBounds(feature._latlng, feature._latlng);
      //        }
      //        if (bounds && clickBounds.intersects(bounds)) {
      //          intersectingFeatures.push(feature);
      //        }
      //      }
      //    }
      //  }
      // intersectingFeatures.map(function(o) {
      //    console.log(o)
      //  })
      //  var html = "Found features: " + intersectingFeatures.length + "<br/>" + intersectingFeatures.map(function(o) {
      //    return o.feature
      //  }).join('<br/>');
      $('#xe').val(e.latlng.lng) 
      $('#ye').val(e.latlng.lat) 
     var html ="";
      
       html = html + "</br></br>Pola Ruang RTRW : </br>"
      $.ajax({
               type : "GET",
               async : false,
               global : false,
               url : root + "peta/list_polaruang?x="+e.latlng.lng+"&y="+e.latlng.lat,
               dataType : 'json',
               success: function (data) {
              // console.log(data)
              $.each(data, function(){
                   html = html + this.rencana_tg+"</br>";
               })
                 
               }
             });

      html = html + "</br>Koordinat : </br>"
       html = html + "</br>"+e.latlng.lng+" "+e.latlng.lat+"</br>"

       
          
       map.openPopup(html, e.latlng);
     }




               // map.fitBounds(bounds);

               var google_roadmap    = L.gridLayer.googleMutant({
                                                               type: 'roadmap',
                                                               styles: [
                                                                           {elementType: 'geometry', stylers: [{color: '#242f3e'}]},
                                                                           {elementType: 'labels.text.stroke', stylers: [{color: '#242f3e'}]},
                                                                           {elementType: 'labels.text.fill', stylers: [{color: '#746855'}]},
                                                                           {
                                                                             featureType: 'administrative.locality',
                                                                             elementType: 'labels.text.fill',
                                                                             stylers: [{color: '#d59563'}]
                                                                           },
                                                                           {
                                                                             featureType: 'poi',
                                                                             elementType: 'labels.text.fill',
                                                                             stylers: [{color: '#d59563'}]
                                                                           },
                                                                           {
                                                                             featureType: 'poi.park',
                                                                             elementType: 'geometry',
                                                                             stylers: [{color: '#263c3f'}]
                                                                           },
                                                                           {
                                                                             featureType: 'poi.park',
                                                                             elementType: 'labels.text.fill',
                                                                             stylers: [{color: '#6b9a76'}]
                                                                           },
                                                                           {
                                                                             featureType: 'road',
                                                                             elementType: 'geometry',
                                                                             stylers: [{color: '#38414e'}]
                                                                           },
                                                                           {
                                                                             featureType: 'road',
                                                                             elementType: 'geometry.stroke',
                                                                             stylers: [{color: '#212a37'}]
                                                                           },
                                                                           {
                                                                             featureType: 'road',
                                                                             elementType: 'labels.text.fill',
                                                                             stylers: [{color: '#9ca5b3'}]
                                                                           },
                                                                           {
                                                                             featureType: 'road.highway',
                                                                             elementType: 'geometry',
                                                                             stylers: [{color: '#746855'}]
                                                                           },
                                                                           {
                                                                             featureType: 'road.highway',
                                                                             elementType: 'geometry.stroke',
                                                                             stylers: [{color: '#1f2835'}]
                                                                           },
                                                                           {
                                                                             featureType: 'road.highway',
                                                                             elementType: 'labels.text.fill',
                                                                             stylers: [{color: '#f3d19c'}]
                                                                           },
                                                                           {
                                                                             featureType: 'transit',
                                                                             elementType: 'geometry',
                                                                             stylers: [{color: '#2f3948'}]
                                                                           },
                                                                           {
                                                                             featureType: 'transit.station',
                                                                             elementType: 'labels.text.fill',
                                                                             stylers: [{color: '#d59563'}]
                                                                           },
                                                                           {
                                                                             featureType: 'water',
                                                                             elementType: 'geometry',
                                                                             stylers: [{color: '#17263c'}]
                                                                           },
                                                                           {
                                                                             featureType: 'water',
                                                                             elementType: 'labels.text.fill',
                                                                             stylers: [{color: '#515c6d'}]
                                                                           },
                                                                           {
                                                                             featureType: 'water',
                                                                             elementType: 'labels.text.stroke',
                                                                             stylers: [{color: '#17263c'}]
                                                                           }
                                                                         ]
                                                          // valid values are 'roadmap', 'satellite', 'terrain' and 'hybrid'
                                                           })

               var google_hybrid     = L.gridLayer.googleMutant({
                                                               type: 'hybrid' // valid values are 'roadmap', 'satellite', 'terrain' and 'hybrid'
                                                           })
               var google_satelit    = L.gridLayer.googleMutant({
                                                               type: 'satellite' // valid values are 'roadmap', 'satellite', 'terrain' and 'hybrid'
                                                           })
               var osm               = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {});
               var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}');
              // var RBI            = L.tileLayer('http://portal.ina-sdi.or.id/arcgis/rest/services/IGD/RupabumiIndonesia/MapServer');

               var RBI =  L.esri.tiledMapLayer({
                 url: "https://portal.ina-sdi.or.id/arcgis/rest/services/IGD/RupabumiIndonesia/MapServer"
               });
                              (function(){
                   var originalInitTile = L.GridLayer.prototype._initTile
                   L.GridLayer.include({
                       _initTile: function (tile) {
                           originalInitTile.call(this, tile);

                           var tileSize = this.getTileSize();

                           tile.style.width = tileSize.x + 1 + 'px';
                           tile.style.height = tileSize.y + 1 + 'px';
                       }
                   });
               })()
               map.addLayer(Esri_WorldImagery);

               var legend = L.control({position: 'bottomleft'});
               var streetview = L.control({position: 'bottomright'});
               
               //gambar
               var drawnItems = L.featureGroup().addTo(map);
               var options = {
                     position: 'topleft',
                     draw: {
                         polyline: false,
                         polygon: {
                          showArea: true,
                             allowIntersection: false, // Restricts shapes to simple polygons
                             drawError: {
                                 color: '#e1e100', // Color the shape will turn when intersects
                                 message: '<strong>Digitasi Salah!' // Message that will show when intersect
                             },
                             shapeOptions: {
                                 color: '#bada55'
                             }
                         },
                         circle: false, // Turns off this drawing tool
                         rectangle: false,
                         marker: false
                     },
                     edit: {
                         featureGroup: drawnItems, //REQUIRED!!
                         remove: true
                     }
                 };
                 
                 var drawControl = new L.Control.Draw(options);
                 map.addControl(drawControl);
                 
                  map.on(L.Draw.Event.CREATED, function(event) {
                    drawnItems.clearLayers();
                     var layer = event.layer;
                           var latlngss = layer.getLatLngs();
                   // console.log(latlngss[0])
                        var seeArea =  L.GeometryUtil.geodesicArea(latlngss[0]);
                                        seeArea = L.GeometryUtil.readableArea(seeArea, true, {})
                                      // console.log(seeArea);
                        // console.log(toWKT(layer));
                        // console.log(layer);
                       var html ="<tr><td>Luas Digitasi :</td><td>"+seeArea+"</td></tr>";
                      
                 
                                $.ajax({
                                              type : "GET",
                                              async : false,
                                              global : false,
                                              url : root + "peta/list_polaruang?p="+toWKT(layer),
                                              dataType : 'json',
                                              success: function (data) {
                                           //  console.log(data)
                                                
                                            $('#tabel_kecamatan_desa').empty()
                                               $.each(data.admin, function(){
                                                var desane = '<ul>';
                                                   $.each(this.desa, function(){
                                                    desane = desane + '<li>'+this.desa+'</li>';
                                                   })
                                                    desane = desane + '</ul>';
                                                 $('#tabel_kecamatan_desa').append("<tr><td>"+this.kecamatan+"</td><td>"+desane+"</td></tr>")
                                               })
                                              
                                             var i = 0;
                                               $('#tabel_polaruang').empty()
                                             $.each(data.pola_ruang, function(){
                                                 var total = 0;
                                                     $.each(this.irisan, function(){
                                                             if(this.polygon){

                                                              wkt.read(''+this.polygon+'');
                                                               var latlngss = wkt.toObject().getLatLngs();
                                                                  var gambar = wkt.toObject();
                                                                 gambar.setStyle(style_gambar);
                                                                  drawnItems.addLayer(gambar);
                                                              //  console.log(this)
                                                              //  console.log(wkt.toObject().getLatLngs())
                                                                  //hitung luas
                                                                if(wkt.toObject().getLatLngs().length > 1){
                                                                  $.each(latlngss, function(index, value){
                                                                   if(value.length > 1){
                                                                     $.each(value, function(indexx, valuee){
                                                                       var luas =  L.GeometryUtil.geodesicArea(valuee);
                                                                       total = total + luas; 
                                                                     })
                                                                   }else{
                                                                     var luas =  L.GeometryUtil.geodesicArea(value);
                                                                       total = total + luas;  
                                                                   }
                                                                     
                                                                     
                                                                  })
                                                                }else{

                                                                 var luas =  L.GeometryUtil.geodesicArea(latlngss[0]);
                                                                 
                                                                       total = total + luas;   
                                                                }
                                                             }
                                                                   
                                                                            
                                                     })
                                                     if(total != 0){
                                                        total = L.GeometryUtil.readableArea(total, true, {})
                                                      }else{
                                                       total = "Kesalahan dalam Penghitungan!"
                                                      }
                                                      i = i + 1;
                                                      // html = html + "<tr><td>Kategori Pola Ruang</td><td>:</td><td>"+this.rencana_tg+" ("+total+")</td></tr>"
                                                     
                                                       $('#tabel_polaruang').append("<tr><td>"+i+"</td><td>"+this.rencana_tg+"  ("+total+")</td></tr>")

                                                     // html = html + this.rencana_tg+" ("+total+")</br>";
                                              })
                                                   // $("#link_print").html('<a class="btn btn-success visible-md visible-lg" href="/pola_ruang/cetak_gambar?p='+toWKT(layer)+'" role="button">Cetak Peta</a>')
                                                // $("#konten-detail").toggle("slide", {direction:"right"}, 500);
                                                $('.modal').modal('show');
                                              }
                                            });
                                     

                      //    html = html+"</br>"+"<a href='/peta/print?p="+toWKT(layer)+"' style='color:blue' target='_blank'>[DOWNLOAD]</a>";
                                var bounds = layer.getBounds();
                       //         // Get center of bounds
                                var center = bounds.getCenter();
                         // map.openPopup(html, center, {
                         //     offset: L.point(0, -24)
                         //   });
                          $('#konten_polaruang').empty()
                         $('#konten_polaruang').append(html)

                         // $("#konten-detail").toggle("slide", {direction:"right"}, 500);
                         $('.modal').modal('show');
                     drawnItems.addLayer(layer);
             
                    
                  
                   });


               //gambar end 



               var locateIcon = L.ExtraMarkers.icon({
                   icon: 'fa-map-marker', 
                   markerColor: 'blue-dark', 
                   prefix: 'fa',
                   iconColor: 'white',
                   shape: 'square'
               });

               var ihtIconAktif = L.ExtraMarkers.icon({
                   prefix: 'fa', 
                   markerColor: 'green-light', 
                   icon: 'fa-building', 
                   iconColor: 'white',
                   shape: 'square'
               });

               var ihtIconTidakAktif = L.ExtraMarkers.icon({
                   prefix: 'fa', 
                   markerColor: 'red', 
                   icon: 'fa-ban', 
                   iconColor: 'white',
                   shape: 'square'
               });

               var ihtIconTidakDiketahui = L.ExtraMarkers.icon({
                   prefix: 'fa', 
                   markerColor: 'orange', 
                   icon: 'fa-question', 
                   iconColor: 'white',
                   shape: 'square'
               });

               var routeIcon = L.ExtraMarkers.icon({
                   prefix: 'fa', 
                   markerColor: 'red', 
                   icon: 'fa-location-arrow', 
                   iconColor: 'white',
                   shape: 'square'
               });

               // $.getJSON( root + "index.php/kabupaten", function( json ) {
               //   $.each(json, function( i, item ) {
               //     $('#kabupaten').append('<option value="'+item.id_kabupaten+'">'+item.nama_kabupaten+'</option>');
               //   })
               // });
             //ambil ksp  
             var label_kec = [];
             var label_desa = [];
         var popup = new L.popup();
            
                     //topojson
                     L.TopoJSON = L.GeoJSON.extend({  
                       addData: function(jsonData) {    
                         if (jsonData.type === "Topology") {
                           for (key in jsonData.objects) {
                             geojson = topojson.feature(jsonData, jsonData.objects[key]);
                             L.GeoJSON.prototype.addData.call(this, geojson);
                           }
                         }    
                         else {
                           L.GeoJSON.prototype.addData.call(this, jsonData);
                         }
                       }  
                     });
                     //topojson
               var wellmaxzoom = 13;       
             var polaruang_layer = new L.GeoJSON();
             var kabupaten_layer = new L.TopoJSON();
             var desa_layer = new L.TopoJSON();
             var perikanan = new L.TopoJSON();
             var hutan_lindung = new L.TopoJSON();
              var pertahanan = new L.TopoJSON();
             var hutan_produksi_terbatas = new L.TopoJSON();
             var hutan_produksi_tetap = new L.TopoJSON();
             var industri = new L.TopoJSON();
             var permukiman_perkotaan = new L.TopoJSON();
             var permukiman_perdesaan = new L.TopoJSON();
              var hortikultura = new L.TopoJSON();
              var hortikultura2 = new L.TopoJSON();
            //  var pertanian_lahan_kering = new L.TopoJSON();
            //  var rth = new L.TopoJSON();
             var sempadan_pantai = new L.TopoJSON();
             var sempadan_sungai = new L.TopoJSON();
             var lppb = new L.TopoJSON();
             var jalan_layer = new L.TopoJSON();
             var tanaman_pangan = new L.TopoJSON();
             var mangrove = new L.TopoJSON();
             var sungai = new L.TopoJSON();
             //hapus labeh
             function hapus_label_kec(){
                var ii = 0;
                     kabupaten_layer.eachLayer(function (layer) {
                   map.removeLayer(label_kec[ii]);
                   // label[ii].clearLayers();
                    ii++;
                 })
                     label_kec = [];
             }
             function tampil_label_kec(){
                var ii = 0;
                         kabupaten_layer.eachLayer(function (layer) {
                           label_kec[ii].setOpacity(1);
                       // label[ii].clearLayers();
                        ii++;
                     })
             }
             function hide_label_kec(){
                var ii = 0;
                         kabupaten_layer.eachLayer(function (layer) {
                           label_kec[ii].setOpacity(0);
                       // label[ii].clearLayers();
                        ii++;
                     })
             }

             function hapus_label_desa(){
                var ii = 0;
                     desa_layer.eachLayer(function (layer) {
                      if(label_desa[ii]){
                        map.removeLayer(label_desa[ii]);
                      }
                   
                   // label[ii].clearLayers();
                    ii++;
                 })
                     label_desa = [];
             }
             function tampil_label_desa(){
                var ii = 0;
                         desa_layer.eachLayer(function (layer) {
                           label_desa[ii].setOpacity(1);
                       // label[ii].clearLayers();
                        ii++;
                     })
             }
             function hide_label_desa(){
                var ii = 0;
                         desa_layer.eachLayer(function (layer) {
                           label_desa[ii].setOpacity(0);
                       // label[ii].clearLayers();
                        ii++;
                     })
             }
             function loadGeoJsonkec(data) {
               hapus_label_kec();
               kabupaten_layer.clearLayers();
               kabupaten_layer.addData(data);

               kabupaten_layer.addTo(map);
               var i = 0;
               var labelnya = "";
                kabupaten_layer.eachLayer(function (layer) {

                     
                       layer.setStyle(style_kabupaten);
                       // layer.bindPopup(feature.properties.kabupaten);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                        label_kec[i] = new L.Tooltip({
                       noHide: false,
                       direction: 'auto'
                       });
                         labelnya = layer.feature.properties.kecamatan;
                        
                     label_kec[i].setContent(labelnya);
                     label_kec[i].setLatLng(center);
                    // label_kec[i].setOpacity(0);
                     map.showLabel(label_kec[i]);
                      layer.on('click', function (e) {
                                      //  panorama(e.latlng.lat, e.latlng.lng);
                                        // clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
             }
             function loadGeoJsondesa(data) {

               hapus_label_desa();
               desa_layer.clearLayers();
               desa_layer.addData(data);
               desa_layer.addTo(map);
               var i = 0;
               var labelnya = "";
                desa_layer.eachLayer(function (layer) {

                     
                          layer.setStyle(style_desa);

                       // layer.bindPopup(feature.properties.kabupaten);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                        label_desa[i] = new L.Tooltip({
                       noHide: false,
                       direction: 'auto'
                       });
                         labelnya = layer.feature.properties.desa;
                        
                     label_desa[i].setContent(labelnya);
                     label_desa[i].setLatLng(center);
                     label_desa[i].setOpacity(0);
                     map.showLabel(label_desa[i]);
                      layer.on('click', function (e) {
                        drawnItems.clearLayers();
                        $('#konten_polaruang').empty()
                                     $.ajax({
                                              type : "GET",
                                              async : false,
                                              global : false,
                                              url : root + "peta/list_polaruang_desa/"+layer.feature.properties.kode_d,
                                              dataType : 'json',
                                              success: function (data) {
                                            // console.log(data)
                                                     var latlngss = layer.getLatLngs();
                                             // console.log(latlngss[0])
                                                  var seeArea =  L.GeometryUtil.geodesicArea(latlngss[0]);
                                                      seeArea = L.GeometryUtil.readableArea(seeArea, true, {})
                                            $('#tabel_kecamatan_desa').empty()
                                               $.each(data.admin, function(){

                                                 $('#tabel_kecamatan_desa').append("<tr><td>"+this.kecamatan+"</td><td>"+this.desa+" ("+seeArea+")</td></tr>")
                                               })
                                              
                                             var i = 0;
                                               $('#tabel_polaruang').empty()
                                             $.each(data.pola_ruang, function(){
                                                 var total = 0;
                                                     $.each(this.irisan, function(){
                                                             if(this.polygon){

                                                              wkt.read(''+this.polygon+'');
                                                               var latlngss = wkt.toObject().getLatLngs();
                                                                  var gambar = wkt.toObject();
                                                                 gambar.setStyle(style_gambar);
                                                                  drawnItems.addLayer(gambar);
                                                              //  console.log(this)
                                                              //  console.log(wkt.toObject().getLatLngs())
                                                                  //hitung luas
                                                                if(wkt.toObject().getLatLngs().length > 1){
                                                                  $.each(latlngss, function(index, value){
                                                                   if(value.length > 1){
                                                                     $.each(value, function(indexx, valuee){
                                                                       var luas =  L.GeometryUtil.geodesicArea(valuee);
                                                                       total = total + luas; 
                                                                     })
                                                                   }else{
                                                                     var luas =  L.GeometryUtil.geodesicArea(value);
                                                                       total = total + luas;  
                                                                   }
                                                                     
                                                                     
                                                                  })
                                                                }else{

                                                                 var luas =  L.GeometryUtil.geodesicArea(latlngss[0]);
                                                                 
                                                                       total = total + luas;   
                                                                }
                                                             }
                                                                   
                                                                            
                                                     })
                                                     if(total != 0){
                                                        total = L.GeometryUtil.readableArea(total, true, {})
                                                      }else{
                                                       total = "Kesalahan dalam Penghitungan!"
                                                      }
                                                      i = i + 1;
                                                      // html = html + "<tr><td>Kategori Pola Ruang</td><td>:</td><td>"+this.rencana_tg+" ("+total+")</td></tr>"
                                                     
                                                       $('#tabel_polaruang').append("<tr><td>"+i+"</td><td>"+this.rencana_tg+"  ("+total+")</td></tr>")

                                                     // html = html + this.rencana_tg+" ("+total+")</br>";
                                              })
                                                 // $("#link_print").html('  <a class="btn btn-success visible-md visible-lg" href="/pola_ruang/cetak/'+layer.feature.properties.kode_d+'" role="button">Cetak Peta</a>')
                                                // $("#konten-detail").toggle("slide", {direction:"right"}, 500);
                                                $('.modal').modal('show');
                                              }
                                            });
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //     // $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                tampil_label_desa();
                map.removeLayer(drawnItems);
                          drawnItems.addTo(map);
             }
             function loadGeoJsonjalan(data) {
             
               jalan_layer.clearLayers();
               jalan_layer.addData(data);
               jalan_layer  = L.featureGroup([jalan_layer]).addTo(map);
               var i = 0;
               var labelnya = "";
               jalan_layer.eachLayer(function (layer) {

                     
                      // layer.setStyle(style_sempadan_sungai);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                      // var bounds = layer.getBounds();
                       // Get center of bounds
                      // var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                       var stl = {
                 color : "red", 
                 weight : 1, 
                 opacity : 1, 
                 fillOpacity  : 0
               };
               layer.setStyle(stl);
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                  
             }
             function loadGeoJsonsungai(data) {
             
             sungai.clearLayers();
             sungai.addData(data);
             sungai  = L.featureGroup([sungai]).addTo(map);
             var i = 0;
             var labelnya = "";
             sungai.eachLayer(function (layer) {

                   
                    // layer.setStyle(style_sempadan_sungai);
                    // layer.bindPopup(layer.feature.properties.rencana_tg);
                     // Get bounds of polygon
                    // var bounds = layer.getBounds();
                     // Get center of bounds
                    // var center = bounds.getCenter();
                     //center.on('click', alert('asu'));
                     // Use center to put marker on map
                     //var marker = L.marker(center).addTo(map);
                     //labelnya
                     var stl = {
               color : "cyan", 
               weight : 1, 
               opacity : 1, 
               fillOpacity  : 0
             };
             layer.setStyle(stl);
                    layer.on('click', function (e) {
                                       //panorama(e.latlng.lat, e.latlng.lng);
                                       clickHandler(e)
                                       });
                   i++;
                     // layer.on("click", function (e) {
                     //       // var bounds = layer.getBounds();
                     //       // var popupContent = "popup content here";
                     //       // popup.setLatLng(bounds.getCenter());
                     //       // popup.setContent(popupContent);
                     //       // map.openPopup(popup);
                     //    //  $('#bs-example-modal-lg').modal('show');
                     //   });
              });
             
           }
          function loadGeoJsonpolaruang(data) {
        
               polaruang_layer.clearLayers();
               polaruang_layer.addData(data);
                polaruang_layer  = L.featureGroup([polaruang_layer]).addTo(map);
               var i = 0;
               var labelnya = "";
                polaruang_layer.eachLayer(function (layer) {

                     
                       layer.setStyle(style_polaruang);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                   // map.removeLayer(polaruang_layer);
             }
                 function loadGeoJsonperikanan(data) {
        
               perikanan.clearLayers();
               perikanan.addData(data);
                perikanan  = L.featureGroup([perikanan]).addTo(map);
               var i = 0;
               var labelnya = "";
                perikanan.eachLayer(function (layer) {

                     
                       layer.setStyle(style_perikanan);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(perikanan);
             }
             function loadGeoJsonmangrove(data) {
        
        mangrove.clearLayers();
        mangrove.addData(data);
        mangrove  = L.featureGroup([mangrove]).addTo(map);
        var i = 0;
        var labelnya = "";
        mangrove.eachLayer(function (layer) {

              
                layer.setStyle(style_perikanan);
               // layer.bindPopup(layer.feature.properties.rencana_tg);
                // Get bounds of polygon
                var bounds = layer.getBounds();
                // Get center of bounds
                var center = bounds.getCenter();
                //center.on('click', alert('asu'));
                // Use center to put marker on map
                //var marker = L.marker(center).addTo(map);
                //labelnya
               
               layer.on('click', function (e) {
                                  //panorama(e.latlng.lat, e.latlng.lng);
                                  clickHandler(e)
                                  });
              i++;
                // layer.on("click", function (e) {
                //       // var bounds = layer.getBounds();
                //       // var popupContent = "popup content here";
                //       // popup.setLatLng(bounds.getCenter());
                //       // popup.setContent(popupContent);
                //       // map.openPopup(popup);
                //    //  $('#bs-example-modal-lg').modal('show');
                //   });
         });
             // map.removeLayer(perikanan);
      }
              function loadGeoJsonhutan_lindung(data) {
        
               hutan_lindung.clearLayers();
               hutan_lindung.addData(data);
                hutan_lindung  = L.featureGroup([hutan_lindung]).addTo(map);
               var i = 0;
               var labelnya = "";
                hutan_lindung.eachLayer(function (layer) {

                     
                       layer.setStyle(style_hutan_lindung);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(hutan_lindung);
             }
              function loadGeoJsonpertahanan(data) {
        
               pertahanan.clearLayers();
               pertahanan.addData(data);
                pertahanan  = L.featureGroup([pertahanan]).addTo(map);
               var i = 0;
               var labelnya = "";
                pertahanan.eachLayer(function (layer) {

                     
                       layer.setStyle(style_pertahanan);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                  //  map.removeLayer(pertahanan);
             }

             function loadGeoJsonhutan_produksi_terbatas(data) {
             
               hutan_produksi_terbatas.clearLayers();
               hutan_produksi_terbatas.addData(data);
               hutan_produksi_terbatas  = L.featureGroup([hutan_produksi_terbatas]).addTo(map);
               var i = 0;
               var labelnya = "";
               hutan_produksi_terbatas.eachLayer(function (layer) {

                     
                       layer.setStyle(style_hutan_produksi_terbatas);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(hutan_produksi_terbatas);
             }

             function loadGeoJsonhutan_produksi_tetap(data) {
             
              hutan_produksi_tetap.clearLayers();
               hutan_produksi_tetap.addData(data);
               hutan_produksi_tetap  = L.featureGroup([hutan_produksi_tetap]).addTo(map);
               var i = 0;
               var labelnya = "";
               hutan_produksi_tetap.eachLayer(function (layer) {

                     
                       layer.setStyle(style_hutan_produksi_tetap);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(hutan_produksi_tetap);
             }

             function loadGeoJsonindustri(data) {
             
               industri.clearLayers();
               industri.addData(data);
               industri  = L.featureGroup([industri]).addTo(map);
               var i = 0;
               var labelnya = "";
               industri.eachLayer(function (layer) {

                     
                       layer.setStyle(style_kawasan_industri);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(industri);
             }
             function loadGeoJsonpermukiman_perkotaan(data) {
             
             permukiman_perkotaan.clearLayers();
             permukiman_perkotaan.addData(data);
             permukiman_perkotaan  = L.featureGroup([permukiman_perkotaan]).addTo(map);
             var i = 0;
             var labelnya = "";
             permukiman_perkotaan.eachLayer(function (layer) {

                   
                     layer.setStyle(style_permukiman);
                    // layer.bindPopup(layer.feature.properties.rencana_tg);
                     // Get bounds of polygon
                     var bounds = layer.getBounds();
                     // Get center of bounds
                     var center = bounds.getCenter();
                     //center.on('click', alert('asu'));
                     // Use center to put marker on map
                     //var marker = L.marker(center).addTo(map);
                     //labelnya
                    
                    layer.on('click', function (e) {
                                       //panorama(e.latlng.lat, e.latlng.lng);
                                       clickHandler(e)
                                       });
                   i++;
                     // layer.on("click", function (e) {
                     //       // var bounds = layer.getBounds();
                     //       // var popupContent = "popup content here";
                     //       // popup.setLatLng(bounds.getCenter());
                     //       // popup.setContent(popupContent);
                     //       // map.openPopup(popup);
                     //    //  $('#bs-example-modal-lg').modal('show');
                     //   });
              });
                  // map.removeLayer(permukiman);
           }

           function loadGeoJsonpermukiman_perdesaan(data) {
           
           permukiman_perdesaan.clearLayers();
           permukiman_perdesaan.addData(data);
           permukiman_perdesaan  = L.featureGroup([permukiman_perdesaan]).addTo(map);
           var i = 0;
           var labelnya = "";
           permukiman_perdesaan.eachLayer(function (layer) {

                 
                   layer.setStyle(style_permukiman);
                  // layer.bindPopup(layer.feature.properties.rencana_tg);
                   // Get bounds of polygon
                   var bounds = layer.getBounds();
                   // Get center of bounds
                   var center = bounds.getCenter();
                   //center.on('click', alert('asu'));
                   // Use center to put marker on map
                   //var marker = L.marker(center).addTo(map);
                   //labelnya
                  
                  layer.on('click', function (e) {
                                     //panorama(e.latlng.lat, e.latlng.lng);
                                     clickHandler(e)
                                     });
                 i++;
                   // layer.on("click", function (e) {
                   //       // var bounds = layer.getBounds();
                   //       // var popupContent = "popup content here";
                   //       // popup.setLatLng(bounds.getCenter());
                   //       // popup.setContent(popupContent);
                   //       // map.openPopup(popup);
                   //    //  $('#bs-example-modal-lg').modal('show');
                   //   });
            });
                // map.removeLayer(permukiman);
         }
             function loadGeoJsonpertanian_lahan_basah(data) {
             
               pertanian_lahan_basah.clearLayers();
               pertanian_lahan_basah.addData(data);
               pertanian_lahan_basah  = L.featureGroup([pertanian_lahan_basah]).addTo(map);
               var i = 0;
               var labelnya = "";
               pertanian_lahan_basah.eachLayer(function (layer) {

                     
                       layer.setStyle(style_pertanian_lahan_basah);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(pertanian_lahan_basah);
             }
              function loadGeoJsonpertanian_lahan_kering(data) {
             
               pertanian_lahan_kering.clearLayers();
               pertanian_lahan_kering.addData(data);
               pertanian_lahan_kering  = L.featureGroup([pertanian_lahan_kering]).addTo(map);
               var i = 0;
               var labelnya = "";
               pertanian_lahan_kering.eachLayer(function (layer) {

                     
                       layer.setStyle(style_pertanian_lahan_kering);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(pertanian_lahan_kering);
             }
           

             function loadGeoJsonhortikultura(data) {
        
               hortikultura.clearLayers();
               hortikultura.addData(data);
               hortikultura  = L.featureGroup([hortikultura]).addTo(map);
               var i = 0;
               var labelnya = "";
               hortikultura.eachLayer(function (layer) {

                     
                       layer.setStyle(style_rth);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(hortikultura);
             }

             function loadGeoJsonhortikultura2(data) {
        
        hortikultura2.clearLayers();
        hortikultura2.addData(data);
        hortikultura2  = L.featureGroup([hortikultura2]).addTo(map);
        var i = 0;
        var labelnya = "";
        hortikultura2.eachLayer(function (layer) {

              
                layer.setStyle(style_rth);
               // layer.bindPopup(layer.feature.properties.rencana_tg);
                // Get bounds of polygon
                var bounds = layer.getBounds();
                // Get center of bounds
                var center = bounds.getCenter();
                //center.on('click', alert('asu'));
                // Use center to put marker on map
                //var marker = L.marker(center).addTo(map);
                //labelnya
               
               layer.on('click', function (e) {
                                  //panorama(e.latlng.lat, e.latlng.lng);
                                  clickHandler(e)
                                  });
              i++;
                // layer.on("click", function (e) {
                //       // var bounds = layer.getBounds();
                //       // var popupContent = "popup content here";
                //       // popup.setLatLng(bounds.getCenter());
                //       // popup.setContent(popupContent);
                //       // map.openPopup(popup);
                //    //  $('#bs-example-modal-lg').modal('show');
                //   });
         });
            //  map.removeLayer(hortikultura2);
      }

             function loadGeoJsonsempadan_pantai(data) {
             
               sempadan_pantai.clearLayers();
               sempadan_pantai.addData(data);
                sempadan_pantai  = L.featureGroup([sempadan_pantai]).addTo(map);
               var i = 0;
               var labelnya = "";
                sempadan_pantai.eachLayer(function (layer) {

                     
                       layer.setStyle(style_sempadan_pantai);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(sempadan_pantai);
             }

             function loadGeoJsonsempadan_sungai(data) {
             
               sempadan_sungai.clearLayers();
               sempadan_sungai.addData(data);
               sempadan_sungai  = L.featureGroup([sempadan_sungai]).addTo(map);
               var i = 0;
               var labelnya = "";
               sempadan_sungai.eachLayer(function (layer) {

                     
                       layer.setStyle(style_sempadan_sungai);
                      // layer.bindPopup(layer.feature.properties.rencana_tg);
                       // Get bounds of polygon
                       var bounds = layer.getBounds();
                       // Get center of bounds
                       var center = bounds.getCenter();
                       //center.on('click', alert('asu'));
                       // Use center to put marker on map
                       //var marker = L.marker(center).addTo(map);
                       //labelnya
                      
                      layer.on('click', function (e) {
                                         //panorama(e.latlng.lat, e.latlng.lng);
                                         clickHandler(e)
                                         });
                     i++;
                       // layer.on("click", function (e) {
                       //       // var bounds = layer.getBounds();
                       //       // var popupContent = "popup content here";
                       //       // popup.setLatLng(bounds.getCenter());
                       //       // popup.setContent(popupContent);
                       //       // map.openPopup(popup);
                       //    //  $('#bs-example-modal-lg').modal('show');
                       //   });
                });
                    // map.removeLayer(sempadan_sungai);
             }

             function loadGeoJsonlppb(data) {
             
             lppb.clearLayers();
             lppb.addData(data);
             lppb  = L.featureGroup([lppb]).addTo(map);
             var i = 0;
             var labelnya = "";
             lppb.eachLayer(function (layer) {

                   
                     layer.setStyle(style_lppb);
                    // layer.bindPopup(layer.feature.properties.rencana_tg);
                     // Get bounds of polygon
                     var bounds = layer.getBounds();
                     // Get center of bounds
                     var center = bounds.getCenter();
                     //center.on('click', alert('asu'));
                     // Use center to put marker on map
                     //var marker = L.marker(center).addTo(map);
                     //labelnya
                    
                    layer.on('click', function (e) {
                                       //panorama(e.latlng.lat, e.latlng.lng);
                                       clickHandler(e)
                                       });
                   i++;
                     // layer.on("click", function (e) {
                     //       // var bounds = layer.getBounds();
                     //       // var popupContent = "popup content here";
                     //       // popup.setLatLng(bounds.getCenter());
                     //       // popup.setContent(popupContent);
                     //       // map.openPopup(popup);
                     //    //  $('#bs-example-modal-lg').modal('show');
                     //   });
              });
                  // map.removeLayer(sempadan_sungai);
           }

           
           function loadGeoJsontanamanPangan(data) {
        
        tanaman_pangan.clearLayers();
        tanaman_pangan.addData(data);
        tanaman_pangan  = L.featureGroup([tanaman_pangan]).addTo(map);
        var i = 0;
        var labelnya = "";
        tanaman_pangan.eachLayer(function (layer) {

              
                layer.setStyle(style_perikanan);
               // layer.bindPopup(layer.feature.properties.rencana_tg);
                // Get bounds of polygon
                var bounds = layer.getBounds();
                // Get center of bounds
                var center = bounds.getCenter();
                //center.on('click', alert('asu'));
                // Use center to put marker on map
                //var marker = L.marker(center).addTo(map);
                //labelnya
               
               layer.on('click', function (e) {
                                  //panorama(e.latlng.lat, e.latlng.lng);
                                  clickHandler(e)
                                  });
              i++;
                // layer.on("click", function (e) {
                //       // var bounds = layer.getBounds();
                //       // var popupContent = "popup content here";
                //       // popup.setLatLng(bounds.getCenter());
                //       // popup.setContent(popupContent);
                //       // map.openPopup(popup);
                //    //  $('#bs-example-modal-lg').modal('show');
                //   });
         });
             // map.removeLayer(perikanan);
      }
      




           


        


     // do stuff after marker has been added

       
     function doAnimations(){
        var myIcon = document.querySelector('.gps_ring')
       //sesudah
        myIcon.style.width = '1000px'
        
     }

             
                
                  
                      

             //ambil kec
               var geoJsonUrl =root+"peta/topojson_kec"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonkec);
                   //ambil polaruang
                 //   var geoJsonUrl =root+"peta/topojson_polaruang"; 
                 // $.getJSON(geoJsonUrl)
                 //   .done(loadGeoJsonpolaruang);
                  

                

                  
          

                //    var geoJsonUrl =root+"peta/topojson_polaruang?kode=8&jenis=2"; 
                //  $.getJSON(geoJsonUrl)
                //    .done(loadGeoJsonpertanian_lahan_basah);

                //    var geoJsonUrl =root+"peta/topojson_polaruang?kode=9&jenis=22"; 
                //  $.getJSON(geoJsonUrl)
                //    .done(loadGeoJsonpertanian_lahan_kering);

                //    var geoJsonUrl =root+"peta/topojson_polaruang?kode=11&jenis=22"; 
                //  $.getJSON(geoJsonUrl)
                //    .done(loadGeoJsonrth);

               
                   //   var geoJsonUrl =root+"peta/jalan"; 
                   // $.getJSON(geoJsonUrl)
                   //   .done(loadGeoJsonjalan);
                   $('#jalan').click(function(){
                          
                          if(this.checked){
                           if(jalan_layer.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=2110&jenis=2"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonjalan);
                            }else{
                               map.addLayer(jalan_layer)
                          }
                          }else{
                           map.removeLayer(jalan_layer)
                          }
                        
                        })

                        $('#sungai').click(function(){
                          
                          if(this.checked){
                           if(sungai.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=4470&jenis=2"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonsungai);
                            }else{
                               map.addLayer(sungai)
                          }
                          }else{
                           map.removeLayer(sungai)
                          }
                        
                        })

                        $('#tanaman').click(function(){
                          
                          if(this.checked){
                           if(tanaman_pangan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=28&jenis=2"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsontanamanPangan);
                            }else{
                               map.addLayer(tanaman_pangan)
                          }
                          }else{
                           map.removeLayer(tanaman_pangan)
                          }
                        
                        })
                        $('#mangrove').click(function(){
                          
                          if(this.checked){
                           if(mangrove.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=21&jenis=1"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonmangrove);
                            }else{
                               map.addLayer(mangrove)
                          }
                          }else{
                           map.removeLayer(mangrove)
                          }
                        
                        })

                   $('#perikanan').click(function(){
                          
                          if(this.checked){
                           if(perikanan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=34&jenis=2"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonperikanan);
                            }else{
                               map.addLayer(perikanan)
                          }
                          }else{
                           map.removeLayer(perikanan)
                          }
                        
                        })

                        $('#lindung').click(function(){
                          
                          if(this.checked){
                           if(hutan_lindung.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=2&jenis=1"; 
                                  $.getJSON(geoJsonUrl)
                                    .done(loadGeoJsonhutan_lindung);
                            }else{
                               map.addLayer(hutan_lindung)
                          }
                          }else{
                           map.removeLayer(hutan_lindung)
                          }
                        
                        })

                        $('#pertahanan').click(function(){
                          
                          if(this.checked){
                           if(pertahanan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=49&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonpertahanan);
                            }else{
                               map.addLayer(pertahanan)
                          }
                          }else{
                           map.removeLayer(pertahanan)
                          }
                        
                        })

                        $('#produksi_terbatas').click(function(){
                          
                          if(this.checked){
                           if(hutan_produksi_terbatas.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=23&jenis=2"; 
                              $.getJSON(geoJsonUrl)
                                .done(loadGeoJsonhutan_produksi_terbatas);
                            }else{
                               map.addLayer(hutan_produksi_terbatas)
                          }
                          }else{
                           map.removeLayer(hutan_produksi_terbatas)
                          }
                        
                        })

                        $('#produksi_tetap').click(function(){
                          
                          if(this.checked){
                           if(hutan_produksi_tetap.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=24&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonhutan_produksi_tetap);
                            }else{
                               map.addLayer(hutan_produksi_tetap)
                          }
                          }else{
                           map.removeLayer(hutan_produksi_tetap)
                          }
                        
                        })

                        
                        $('#industri').click(function(){
                          
                          if(this.checked){
                           if(industri.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=42&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonindustri);
                            }else{
                               map.addLayer(industri)
                          }
                          }else{
                           map.removeLayer(industri)
                          }
                        
                        })

                        $('#permukiman_perkotaan').click(function(){
                          
                          if(this.checked){
                           if(permukiman_perkotaan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=47&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonpermukiman_perkotaan);
                            }else{
                               map.addLayer(permukiman_perkotaan)
                          }
                          }else{
                           map.removeLayer(permukiman_perkotaan)
                          }
                        
                        })

                        $('#permukiman_perdesaan').click(function(){
                          
                          if(this.checked){
                           if(permukiman_perdesaan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=48&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonpermukiman_perdesaan);
                            }else{
                               map.addLayer(permukiman_perdesaan)
                          }
                          }else{
                           map.removeLayer(permukiman_perdesaan)
                          }
                        
                        })

                        
                        
                        $('#hortikultura').click(function(){
                          
                          if(this.checked){
                           if(hortikultura.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=29&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonhortikultura);
                            }else{
                               map.addLayer(hortikultura)
                          }
                          }else{
                           map.removeLayer(hortikultura)
                          }
                        
                        })

                          
                        $('#hortikultura2').click(function(){
                          
                          if(this.checked){
                           if(hortikultura2.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=29&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonhortikultura2);
                            }else{
                               map.addLayer(hortikultura2)
                          }
                          }else{
                           map.removeLayer(hortikultura2)
                          }
                        
                        })

                        $('#sempadan').click(function(){
                          
                          if(this.checked){
                           if(sempadan_pantai.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=6&jenis=1"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonsempadan_pantai);

                              var geoJsonUrl =root+"peta/topojson_polaruang?kode=7&jenis=1"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonsempadan_sungai);
                            }else{
                               map.addLayer(sempadan_pantai)
                               map.addLayer(sempadan_sungai)
                          }
                          }else{
                           map.removeLayer(sempadan_pantai)
                           map.removeLayer(sempadan_sungai)
                          }
                        
                        })

                        $('#lppb').click(function(){
                          
                          if(this.checked){
                           if(lppb.getLayers().length==0){
                            var geoJsonUrl =root+"peta/krb_lppb?kode=lppb"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonlppb);
                            }else{
                               map.addLayer(lppb)
                          }
                          }else{
                           map.removeLayer(lppb)
                          }
                        
                        })
             

          //               <li><input type="checkbox" id="lindung" name="" value=""><label>&nbsp;&nbsp;Kawasan Hutan Lindung</label></li>
          //   <li><input type="checkbox" id="sempadan" name="" value=""><label>&nbsp;&nbsp;Sempadan</label></li>
          //   <li><input type="checkbox" id="ekosistem" name="" value=""><label>&nbsp;&nbsp;Kawasan Ekosistem</label></li>
          //   <li><input type="checkbox" id="hortikultura" name="" value=""><label>&nbsp;&nbsp;Kawasan Hortikultura</label></li>
          // </ul>

          // <h4 style="margin-top: 0;margin-bottom: 0;font-family: Source Sans Pro"><strong>Kawasan Budidaya</strong></h4>
          // <ul class="list-unstyled" style="margin-left: 15px;margin-top: 15px;">
          //   <li><input type="checkbox" id="jalan" name="" value=""><label>&nbsp;&nbsp;Jalan/Sungai</label></li>
          //   <li><input type="checkbox" id="produksi_tetap" name="" value=""><label>&nbsp;&nbsp;Hutan Produksi Tetap</label></li>
          //   <li><input type="checkbox" id="produksi_terbatas" name="" value=""><label>&nbsp;&nbsp;Hutan Produksi Tetap</label></li>
          //   <li><input type="checkbox" id="tanaman" name="" value=""><label>&nbsp;&nbsp;Kawasan Tanaman</label></li>
          //   <li><input type="checkbox" id="perikanan" name="" value=""><label>&nbsp;&nbsp;Perikanan Budidaya</label></li>
          //   <li><input type="checkbox" id="industri" name="" value=""><label>&nbsp;&nbsp;Industri</label></li>
          //   <li><input type="checkbox" id="permukiman" name="" value=""><label>&nbsp;&nbsp;Permukiman</label></li>
          //   <li><input type="checkbox" id="pertahanan" name="" value=""><label>&nbsp;&nbsp;Pertahanan dan Keamanan</label></li>
          //   <li><input type="checkbox" id="hortikultura2" name="" value=""><label>&nbsp;&nbsp;Kawasan Hortikultura</label></li>
                    //ambil eksisting
              
                   map.on('moveend', function(){
                    if(map.getZoom() > 10 && map.getZoom() < 14){
                          tampil_label_kec();
                    }else{
                     hide_label_kec();
                    }
                  })
                     var kiri_atas_lng  = map.getBounds().getSouthWest().lng;
               var kiri_atas_lat  = map.getBounds().getSouthWest().lat;
               var kanan_bawah_lng = map.getBounds().getNorthEast().lng;
               var kanan_bawah_lat = map.getBounds().getNorthEast().lat;
                  
                       
                      
                   //end ambil_kec

             //saat pindah
             map.on('moveend', function(){
              if(map.getZoom() > wellmaxzoom){
               //kembali ke asal

              
              //kembali ke asal

               var kiri_atas_lng  = map.getBounds().getSouthWest().lng;
               var kiri_atas_lat  = map.getBounds().getSouthWest().lat;
               var kanan_bawah_lng = map.getBounds().getNorthEast().lng;
               var kanan_bawah_lat = map.getBounds().getNorthEast().lat;
              //   var geoJsonUrl =root + "index.php/peta/geo_kec_bound/"+kiri_atas_lng+"/"+kiri_atas_lat+"/"+kanan_bawah_lng+"/"+kanan_bawah_lat; 
                 var geoJsonUrl =root+"peta/topojson_desa?kiri_lng="+kiri_atas_lng+"&kiri_lat="+kiri_atas_lat+"&kanan_lng="+kanan_bawah_lng+"&kanan_lat="+kanan_bawah_lat; 
                // console.log(geoJsonUrl);
               // console.log(map.getBounds().toBBoxString());
               // console.log(map.getBounds().getSouthWest().lng + ';' + map.getBounds().getSouthWest().lat + ';' + map.getBounds().getNorthEast().lng + ';' + map.getBounds().getNorthEast().lat);
             //    var boundingBox = L.rectangle(map.getBounds(), {color: "#ff7800", weight: 1});
             // map.addLayer(boundingBox);
                 // $.ajax({
                 //     url: geoJsonUrl,
                 //     datatype: 'json',
                 //     jsonCallback: 'getJson',
                 //     success: loadGeoJson
                 //     });
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsondesa);


                   
                 }else{
                 hapus_label_desa();
                   map.removeLayer(desa_layer);
                 };
             });

             //end moveend

        legend.onAdd = function (map) {
                 var div = L.DomUtil.create('div', 'info-legend')
                
                // loop through our density intervals and generate a label with a colored square for each interval
                 for (var i = 0; i < warna_total.length; i++) {
                   div.innerHTML += '<i style="background:' + warna_total[i] + '"></i> ' + labels[i] + '<br>';
                 }
                 return div;
               };

              legend.addTo(map);

               var baseLayers = {
                 "Google Roadmap": google_roadmap,
                 "Google Hybrid": google_hybrid,
                 "Google Satellite": google_satelit,
                 "Open Street Map": osm,
                 "ESRI World Imagery": Esri_WorldImagery,
                 "RBI": RBI
               };
               
               // var overlays = {
               //   "kecamatan": kabupaten_layer,
               //   "<span>RTRW Semapadan Sungai</span>&nbsp;&nbsp;<span style='background-color:#499277;padding:2px 8px 2px 8px;'></span>": sempadan_sungai,
               //   "<span>RTRW Sempadan Pantai</span>&nbsp;&nbsp;<span style='background-color:#3F786F;padding:2px 8px 2px 8px;'></span>": sempadan_pantai,
               //   "<span>RTRW Kawasan Konservasi/KA</span>&nbsp;&nbsp;<span style='background-color:#195344;padding:2px 8px 2px 8px;'></span>": kawasan_konservasi,
               //   "<span>RTRW Hutan Lindung</span>&nbsp;&nbsp;<span style='background-color:#8C8D88;padding:2px 8px 2px 8px;'></span>": hutan_lindung,
               //   "<span>RTRW Tambak</span>&nbsp;&nbsp;<span style='background-color:#48B3C5;padding:2px 8px 2px 8px;'></span>": tambak,
               //   "<span>RTRW Lahan Basah Kering</span>&nbsp;&nbsp;<span style='background-color:#C8DEB0;padding:2px 8px 2px 8px;'></span>": lahan_basah_kering,
               //   "<span>RTRW Permukiman Perkotaan</span>&nbsp;&nbsp;<span style='background-color:#E8B05D;padding:2px 8px 2px 8px;'></span>": permukiman_perkotaan,
               //   "<span>RTRW Permukiman Perdesaan</span>&nbsp;&nbsp;<span style='background-color:#E8B05D;padding:2px 8px 2px 8px;'></span>": permukiman_perdesaan,
               //   "<span>RTRW Perkebunan</span>&nbsp;&nbsp;<span style='background-color:#ABBC6E;padding:2px 8px 2px 8px;'></span>": perkebunan,
               //   "<span>RTRW Industri</span>&nbsp;&nbsp;<span style='background-color:#9E8986;padding:2px 8px 2px 8px;'></span>": industri,
               //   "<span>RTRW Hutan Produksi Terbatas</span>&nbsp;&nbsp;<span style='background-color:#7EA4D3;padding:2px 8px 2px 8px;'></span>": hutan_produksi_terbatas,
               //   "<span>RTRW Hutan Produksi</span>&nbsp;&nbsp;<span style='background-color:#7EA4D3;padding:2px 8px 2px 8px;'></span>": hutan_produksi,
               //   "<span>Jalan</span>&nbsp;&nbsp;<span style='background-color:red;padding:2px 8px 2px 8px;'></span>": jalan_layer
                
                 
               // };
               
               // L.control.layers(baseLayers,overlays,{
               //   position : 'topright'
               // }, {'drawlayer':drawnItems}, { position: 'topleft', collapsed: false }).addTo(map);

                               var groupedOverlays = {
                                    "Administrasi": {
                      "&nbsp;&nbsp;&nbsp;&nbsp;kecamatan": kabupaten_layer,
                     "&nbsp;&nbsp;&nbsp;&nbsp;Desa": desa_layer,
                     
                      },
                      "Pola Ruang RTRW": {
                    //      "&nbsp;&nbsp;&nbsp;&nbsp;<span>Perikanan</span>&nbsp;&nbsp;<span style='background-color:#C1EFFD;padding:2px 8px 2px 8px;'></span>": perikanan,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Hutan Lindung</span>&nbsp;&nbsp;<span style='background-color:#DFFFEA;padding:2px 8px 2px 8px;'></span>": hutan_lindung,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Pertahanan</span>&nbsp;&nbsp;<span style='background-color:#F224C6;padding:2px 8px 2px 8px;'></span>": pertahanan,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Hutan Produksi Terbatas</span>&nbsp;&nbsp;<span style='background-color:#B2E8E8;padding:2px 8px 2px 8px;'></span>": hutan_produksi_terbatas,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Hutan Produksi Tetap</span>&nbsp;&nbsp;<span style='background-color:#99F2CD;padding:2px 8px 2px 8px;'></span>": hutan_produksi_tetap,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Industri</span>&nbsp;&nbsp;<span style='background-color:#E4E8B3;padding:2px 8px 2px 8px;'></span>": industri,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Permukiman</span>&nbsp;&nbsp;<span style='background-color:#FCDB2B;padding:2px 8px 2px 8px;'></span>": permukiman,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Pertanian Lahan Basah</span>&nbsp;&nbsp;<span style='background-color:#CBFFB5;padding:2px 8px 2px 8px;'></span>": pertanian_lahan_basah,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Pertanian Lahan Kering</span>&nbsp;&nbsp;<span style='background-color:#95FEBD;padding:2px 8px 2px 8px;'></span>": pertanian_lahan_kering,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Ruang Terbuka Hijau</span>&nbsp;&nbsp;<span style='background-color:#97FEC0;padding:2px 8px 2px 8px;'></span>": rth,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Sempadan Pantai</span>&nbsp;&nbsp;<span style='background-color:#CCFFCC;padding:2px 8px 2px 8px;'></span>": sempadan_pantai,
                    //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Sempadan Sungai</span>&nbsp;&nbsp;<span style='background-color:#C1FFCD;padding:2px 8px 2px 8px;'></span>": sempadan_sungai,
                   
                   //  "&nbsp;&nbsp;&nbsp;&nbsp;<span>Jalan</span>&nbsp;&nbsp;<span style='background-color:red;padding:2px 8px 2px 8px;'></span>": jalan_layer
                    
                      }
                    };
                          var options = {
            // Make the "Landmarks" group exclusive (use radio inputs)
           // exclusiveGroups: ["Landmarks"],
            // Show a checkbox next to non-exclusive group labels for toggling all
            collapsed:false,
            groupCheckboxes: false
          };
               L.control.groupedLayers(baseLayers, groupedOverlays, options).addTo(map);
            

               streetview.onAdd = function (map) {
                 var div = L.DomUtil.create('div', 'sv')
                
                // loop through our density intervals and generate a label with a colored square for each interval
                   div.innerHTML += '';
                 
                 return div;
               };

              // streetview.addTo(map);

               L.control.scale({
                 position : 'bottomright',
                 metric : true,
                 imperial : false
               }).addTo(map);
               
               lc = L.control.locate({
                 position : 'topleft',
                 follow : true,
                 strings : {
                   title : "Lokasi Anda",
                   popup: "Anda berada di radius {distance} {unit} dari titik ini"
                 },
                 markerClass : L.marker,
                 markerStyle : {icon: locateIcon},
                 keepCurrentZoomLevel : true
               }).addTo(map);

               map
                 .on('startfollowing', function() {
                   map.on('dragstart', lc._stopFollowing, lc);
                 })
                 .on('stopfollowing', function() {
                     map.off('dragstart', lc._stopFollowing, lc);
                 });

               map.on('locationfound', onLocationFound);
               

               // map.on('moveend', function() { 
               //      console.log(map.getBounds());
               // });

               map.on('baselayerchange', function(e) {
                 console.log(e.name);

                 if ( e.name == 'Google Roadmap' || e.name == 'Open Street Map' || e.name == 'Mapbox Street') {
                   kabupaten_layer.eachLayer(function (layer) {
                  //   layer.setStyle(style_kabupaten_gelap);
                   });
                 }else{
                   kabupaten_layer.eachLayer(function (layer) {
                     layer.setStyle(style_kabupaten);
                   });
                 }

               });
               
               //ganti kabupaten
               $('#search_maps').hide();


              // $('.leaflet-bottom.leaflet-left').hide();
               
               $('.leaflet-bar-part.leaflet-bar-part-single').click(function () {
                
               })
               

               //panorama
              var marker= "";
              var titik_panorama = null;
               function panorama(xe,ye){
                  if(titik_panorama != null){
                 map.removeLayer(titik_panorama);     
                  }
                  if(marker!=""){
                    map.removeLayer(marker);
                    
                  }
                     titik_panorama = L.marker([xe, ye]).addTo(map);
                  var fenway = new google.maps.LatLng(xe,ye);
                    var panoramaOptions = {
                      position: fenway,
                      pov: {
                        heading: 34,
                        pitch: 10
                      }
                    };
                    var panorama = new  google.maps.StreetViewPanorama(document.getElementById('pano'),panoramaOptions);
                  
             }
         //       map.on('click', function(e) {

         //    // console.log(e.latlng.lat+' '+e.latlng.lng);
         //    var xe = e.latlng.lat;
         //    var ye = e.latlng.lng;
            
         //    panorama(xe,ye)
          
                  
         // });

         $('#kec').change(function() {
                console.log($('option:selected', this).attr('xe'))
                map.setView(new L.LatLng($('option:selected', this).attr('ye'), $('option:selected', this).attr('xe')), 13);
               $.ajax({
                 type : "GET",
                 async : false,
                 global : false,
                 url :  "/pola_ruang/get_desa_by_kec?kec="+$('#kec').val(),
                 dataType : 'json',
                 success: function (data) {
                  $("#desa").empty();
                  $("#desa").append('<option value="">-- PILIH --</option>')
                $.each(data, function(){
                     $("#desa").append('<option value="'+ this.desa +'" xe="'+ this.xe +'" ye="'+ this.ye +'" >'+ this.desa +'</option>')
                 })
                   
                 }
               });            
           });


           $('#desa').change(function() {
            map.setView(new L.LatLng($('option:selected', this).attr('ye'), $('option:selected', this).attr('xe')), 15);
                     
           });

          
        var pemilik2 = [
          `Kawasan Hutan Lindung`,
          'Sempadan',
          'Ekosistem Mangrove',
          'Hortikultura',
          'Jalan',
          'Sungai',
          'Hutan Produksi Tetap',
          'Hutan Produksi Terbatas',
          'Kawasan Tanaman',
          'Perikanan Budidaya',
          'Industri',
          'Permukiman Perkotaan',
          'Permukiman Perdesaan',
          'Pertanahan & Keamanan',
          'Kawasan Hortikultura',
          'LPPB',
        ];
    
        $( "#pemilik" ).autocomplete({
              source: pemilik2,
              minLength : 3,
              messages: {
                      noResults: 'Tidak Ada data',
                      results: function(data) {
                        console.log(data)
                        return data+" Ditemukan, Silahkan tekan tombol keatas / kebawah"
                      }
                  }
            });

            $('#pencarian').click(function(){
              // console.log($("#pemilik").val());
              let pilihan = $("#pemilik").val()
           
                          
                          if(pilihan=='Jalan'){
                           if(jalan_layer.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=2110&jenis=2"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonjalan);
                            }else{
                               map.addLayer(jalan_layer)
                          }
                          }
                   

                          
                          if(pilihan=='Sungai'){
                           if(sungai.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=4470&jenis=2"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonsungai);
                            }else{
                               map.addLayer(sungai)
                          }
                          }

                      
                          
                          if(pilihan=='Kawasan Tanaman'){
                           if(tanaman_pangan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=28&jenis=2"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsontanamanPangan);
                            }else{
                               map.addLayer(tanaman_pangan)
                          }
                          }
                   
                          
                          if(pilihan=='Ekosistem Mangrove'){
                           if(mangrove.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=21&jenis=1"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonmangrove);
                            }else{
                               map.addLayer(mangrove)
                          }
                          }

                 
                          
                           if(pilihan=='Perikanan Budidaya'){
                           if(perikanan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=34&jenis=2"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonperikanan);
                            }else{
                               map.addLayer(perikanan)
                          }
                          }

                  
                          
                          if(pilihan=='Kawasan Hutan Lindung'){
                           if(hutan_lindung.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=2&jenis=1"; 
                                  $.getJSON(geoJsonUrl)
                                    .done(loadGeoJsonhutan_lindung);
                            }else{
                               map.addLayer(hutan_lindung)
                          }
                          }

                    
                          
                          if(pilihan=='Pertanahan & Keamanan'){
                           if(pertahanan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=49&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonpertahanan);
                            }else{
                               map.addLayer(pertahanan)
                          }
                          }

                   
                          
                          if(pilihan=='Hutan Produksi Terbatas'){
                           if(hutan_produksi_terbatas.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=23&jenis=2"; 
                              $.getJSON(geoJsonUrl)
                                .done(loadGeoJsonhutan_produksi_terbatas);
                            }else{
                               map.addLayer(hutan_produksi_terbatas)
                          }
                          }

                      
                          
                          if(pilihan=='Hutan Produksi Tetap'){
                           if(hutan_produksi_tetap.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=24&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonhutan_produksi_tetap);
                            }else{
                               map.addLayer(hutan_produksi_tetap)
                          }
                          }

                        
                      
                          
                          if(pilihan=='Industri'){
                           if(industri.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=42&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonindustri);
                            }else{
                               map.addLayer(industri)
                          }
                          }

                    
                          
                          if(pilihan=='Permukiman Perkotaan'){
                           if(permukiman_perkotaan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=47&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonpermukiman_perkotaan);
                            }else{
                               map.addLayer(permukiman_perkotaan)
                          }
                          }

                      
                          
                          if(pilihan=='Permukiman Perdesaan'){
                           if(permukiman_perdesaan.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=48&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonpermukiman_perdesaan);
                            }else{
                               map.addLayer(permukiman_perdesaan)
                          }
                          }

                        
                        
                   
                          
                          if(pilihan=='Hortikultura'){
                           if(hortikultura.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=29&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonhortikultura);
                            }else{
                               map.addLayer(hortikultura)
                          }
                          }

                          
                 
                          
                          if(pilihan=='Kawasan Hortikultura'){
                           if(hortikultura2.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=29&jenis=2"; 
                 $.getJSON(geoJsonUrl)
                   .done(loadGeoJsonhortikultura2);
                            }else{
                               map.addLayer(hortikultura2)
                          }
                          }

                    
                          
                          if(pilihan=='Sempadan'){
                           if(sempadan_pantai.getLayers().length==0){
                            var geoJsonUrl =root+"peta/topojson_polaruang?kode=6&jenis=1"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonsempadan_pantai);

                              var geoJsonUrl =root+"peta/topojson_polaruang?kode=7&jenis=1"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonsempadan_sungai);
                            }else{
                               map.addLayer(sempadan_pantai)
                               map.addLayer(sempadan_sungai)
                          }
                          }
                     

                       
                          
                          if(pilihan=='LPPB'){
                           if(lppb.getLayers().length==0){
                            var geoJsonUrl =root+"peta/krb_lppb?kode=lppb"; 
                            $.getJSON(geoJsonUrl)
                              .done(loadGeoJsonlppb);
                            }else{
                               map.addLayer(lppb)
                          }
                          }
            })
   </script>
</body>
</html>